# NumPyæ•°ç»„åˆ›å»ºä¸ç´¢å¼•

> å­¦ä¹ ç›®æ ‡ï¼šæŒæ¡NumPyæ•°ç»„çš„åˆ›å»ºå’Œç´¢å¼•æ–¹æ³•ï¼Œä¸ºå‘é‡æ•°æ®åº“æ“ä½œæ‰“ä¸‹åšå®åŸºç¡€

---

## 1. ã€30å­—æ ¸å¿ƒã€‘

**NumPyæ•°ç»„æ˜¯é«˜æ€§èƒ½æ•°å€¼è®¡ç®—çš„åŸºç¡€æ•°æ®ç»“æ„ï¼Œæä¾›é«˜æ•ˆçš„å‘é‡å­˜å‚¨å’Œç´¢å¼•èƒ½åŠ›ï¼Œæ˜¯å‘é‡æ•°æ®åº“æ“ä½œçš„æ ¸å¿ƒå·¥å…·ã€‚**

---

## 2. ã€ç¬¬ä¸€æ€§åŸç†ã€‘

### ä»€ä¹ˆæ˜¯ç¬¬ä¸€æ€§åŸç†ï¼Ÿ

**ç¬¬ä¸€æ€§åŸç†**ï¼šå›åˆ°äº‹ç‰©æœ€åŸºæœ¬çš„çœŸç†ï¼Œä»æºå¤´æ€è€ƒé—®é¢˜

---

### NumPyæ•°ç»„çš„ç¬¬ä¸€æ€§åŸç† ğŸ¯

#### 1. æœ€åŸºç¡€çš„å®šä¹‰

**NumPyæ•°ç»„ = è¿ç»­å†…å­˜å— + å…ƒæ•°æ®ï¼ˆå½¢çŠ¶ã€ç±»å‹ã€æ­¥é•¿ï¼‰**

```
NumPyæ•°ç»„ = {
  data: æŒ‡å‘è¿ç»­å†…å­˜å—çš„æŒ‡é’ˆ
  dtype: æ•°æ®ç±»å‹ï¼ˆå¦‚float32ï¼‰
  shape: å½¢çŠ¶å…ƒç»„ï¼ˆå¦‚(1000, 768)ï¼‰
  strides: æ­¥é•¿å…ƒç»„ï¼ˆå¦‚(3072, 4)ï¼‰
}
```

```python
import numpy as np

arr = np.array([[1, 2, 3], [4, 5, 6]], dtype=np.int32)

print(f"æ•°æ®æŒ‡é’ˆ: {arr.ctypes.data}")
print(f"æ•°æ®ç±»å‹: {arr.dtype}")      # int32
print(f"å½¢çŠ¶: {arr.shape}")           # (2, 3)
print(f"æ­¥é•¿: {arr.strides}")         # (12, 4) å­—èŠ‚
print(f"æ€»å­—èŠ‚: {arr.nbytes}")        # 24 (2Ã—3Ã—4)
```

ä»…æ­¤è€Œå·²ï¼æ²¡æœ‰æ›´åŸºç¡€çš„äº†ã€‚

---

#### 2. ä¸ºä»€ä¹ˆéœ€è¦NumPyæ•°ç»„ï¼Ÿ

**æ ¸å¿ƒé—®é¢˜ï¼šè®¡ç®—æœºå¦‚ä½•é«˜æ•ˆå¤„ç†å¤§è§„æ¨¡æ•°å€¼æ•°æ®ï¼Ÿ**

**ä¸‰ä¸ªæ ¹æœ¬æ€§æŒ‘æˆ˜ï¼š**

1. **é€Ÿåº¦æŒ‘æˆ˜**ï¼šPythonè§£é‡Šå‹è¯­è¨€ï¼Œå¾ªç¯æ…¢ï¼ˆæ¯æ¬¡è¿­ä»£éƒ½æœ‰è§£é‡Šå¼€é”€ï¼‰
2. **å†…å­˜æŒ‘æˆ˜**ï¼šæ•°æ®é‡å¤§ï¼ˆç™¾ä¸‡ã€åƒä¸‡çº§ï¼‰ï¼Œå†…å­˜å¿…é¡»ç´§å‡‘
3. **è®¡ç®—æŒ‘æˆ˜**ï¼šçŸ©é˜µè¿ç®—æ˜¯åŸºç¡€ï¼ˆå‘é‡ç›¸ä¼¼åº¦ã€çŸ©é˜µä¹˜æ³•ï¼‰ï¼Œéœ€è¦é«˜æ•ˆå®ç°

**Pythonåˆ—è¡¨æ— æ³•æ»¡è¶³ï¼š**
```python
# Pythonåˆ—è¡¨å¤„ç†100ä¸‡ä¸ªæ•°
data = list(range(1000000))
result = [x ** 2 for x in data]  # æ…¢ï¼Œ2ç§’
# é—®é¢˜ï¼šæ¯æ¬¡è¿­ä»£éƒ½è¦Pythonè§£é‡Šå™¨å¤„ç†
```

**NumPyæ•°ç»„çš„è§£å†³æ–¹æ¡ˆï¼š**
```python
import numpy as np
data = np.arange(1000000)
result = data ** 2  # å¿«ï¼Œ0.002ç§’ï¼ˆ1000å€ï¼‰
# å…³é”®ï¼šå¾ªç¯åœ¨Cè¯­è¨€å±‚é¢æ‰§è¡Œï¼Œç»•è¿‡Pythonè§£é‡Šå™¨
```

---

#### 3. NumPyæ•°ç»„çš„ä¸‰å±‚ä»·å€¼

##### ä»·å€¼1ï¼šæ€§èƒ½ï¼ˆPerformanceï¼‰

**ä»Pythonè§£é‡Šå™¨åˆ°Cè¯­è¨€æ‰§è¡Œ**

```python
# Pythonå¾ªç¯ï¼ˆæ…¢ï¼‰
result = []
for x in data:
    result.append(x ** 2)
# æ¯æ¬¡å¾ªç¯ï¼šPythonè§£é‡Šå™¨ â†’ ç±»å‹æ£€æŸ¥ â†’ å‡½æ•°è°ƒç”¨ â†’ æ‰§è¡Œ

# NumPyå‘é‡åŒ–ï¼ˆå¿«ï¼‰
result = data ** 2
# ä¸€æ¬¡è°ƒç”¨ï¼šPython â†’ Cå‡½æ•° â†’ forå¾ªç¯åœ¨Cä¸­æ‰§è¡Œï¼ˆæ— è§£é‡Šå¼€é”€ï¼‰
```

**åº•å±‚æœºåˆ¶ï¼š**
- Pythonå¾ªç¯ï¼šæ¯ä¸ªæ“ä½œéƒ½æœ‰Pythonå¯¹è±¡å¼€é”€
- NumPyå‘é‡åŒ–ï¼šå•æ¬¡Pythonè°ƒç”¨ + Cå±‚é¢çš„ç´§å¯†å¾ªç¯ + SIMDæŒ‡ä»¤

**æ€§èƒ½æå‡ï¼š**
- ç®€å•è¿ç®—ï¼š10-100å€åŠ é€Ÿ
- çŸ©é˜µè¿ç®—ï¼š100-1000å€åŠ é€Ÿ
- å¤§è§„æ¨¡æ•°æ®ï¼šæ¥è¿‘Cè¯­è¨€æ€§èƒ½

---

##### ä»·å€¼2ï¼šå†…å­˜æ•ˆç‡ï¼ˆMemory Efficiencyï¼‰

**ä»åˆ†æ•£å­˜å‚¨åˆ°è¿ç»­å­˜å‚¨**

```python
# Pythonåˆ—è¡¨ï¼ˆåˆ†æ•£ï¼‰
list_data = [1.0, 2.0, 3.0, 4.0, 5.0]
# å†…å­˜ï¼š5ä¸ªfloatå¯¹è±¡ï¼ˆæ¯ä¸ª28å­—èŠ‚ï¼‰ = 140å­—èŠ‚

# NumPyæ•°ç»„ï¼ˆè¿ç»­ï¼‰
array_data = np.array([1.0, 2.0, 3.0, 4.0, 5.0], dtype=np.float32)
# å†…å­˜ï¼š5ä¸ªfloat32ï¼ˆæ¯ä¸ª4å­—èŠ‚ï¼‰ = 20å­—èŠ‚
# èŠ‚çœ85%ï¼
```

**ä¸¾ä¾‹ï¼šå‘é‡æ•°æ®åº“**
```python
# å­˜å‚¨100ä¸‡ä¸ª768ç»´embedding

# æ–¹æ¡ˆ1ï¼šPythonåˆ—è¡¨
# 100ä¸‡ Ã— 768 Ã— 28å­—èŠ‚ = 21GB

# æ–¹æ¡ˆ2ï¼šNumPyæ•°ç»„ï¼ˆfloat32ï¼‰
# 100ä¸‡ Ã— 768 Ã— 4å­—èŠ‚ = 3GB
# èŠ‚çœ86%å†…å­˜ï¼
```

---

##### ä»·å€¼3ï¼šæ•°å­¦è¯­ä¹‰ï¼ˆMathematical Semanticsï¼‰

**ä»å¾ªç¯åˆ°æ•°å­¦è¡¨è¾¾å¼**

```python
# ä¼ ç»Ÿå¾ªç¯æ€ç»´
result = []
for i in range(len(A)):
    sum_val = 0
    for j in range(len(B[i])):
        sum_val += A[i][j] * B[j]
    result.append(sum_val)

# NumPyæ•°å­¦æ€ç»´
result = A @ B  # çŸ©é˜µä¹˜æ³•ï¼Œæ¸…æ™°ç›´è§‚
```

**ä»£ç å¯è¯»æ€§ï¼š**
```python
# è®¡ç®—ä¸¤ä¸ªå‘é‡çš„ä½™å¼¦ç›¸ä¼¼åº¦

# å¾ªç¯å®ç°ï¼ˆ20è¡Œä»£ç ï¼‰
dot_product = 0
norm_a = 0
norm_b = 0
for i in range(len(a)):
    dot_product += a[i] * b[i]
    norm_a += a[i] ** 2
    norm_b += b[i] ** 2
norm_a = norm_a ** 0.5
norm_b = norm_b ** 0.5
cosine_similarity = dot_product / (norm_a * norm_b)

# NumPyå®ç°ï¼ˆ1è¡Œä»£ç ï¼‰
cosine_similarity = np.dot(a, b) / (np.linalg.norm(a) * np.linalg.norm(b))
# æˆ–æ›´ç®€æ´
from sklearn.metrics.pairwise import cosine_similarity
cosine_similarity(a, b)
```

---

#### 4. ä»ç¬¬ä¸€æ€§åŸç†æ¨å¯¼å‘é‡æ•°æ®åº“

**æ¨ç†é“¾ï¼š**

```
1. ç°å®ä¸–ç•Œçš„å¯¹è±¡ï¼ˆæ–‡æœ¬ã€å›¾åƒï¼‰æ— æ³•ç›´æ¥è®¡ç®—
   â†“ éœ€è¦æ•°å€¼è¡¨ç¤º

2. å°†å¯¹è±¡è½¬æ¢æˆå‘é‡ï¼ˆembeddingï¼‰
   â†“ éœ€è¦å­˜å‚¨å¤§é‡å‘é‡

3. å‘é‡æ•°é‡å·¨å¤§ï¼ˆç™¾ä¸‡ã€åƒä¸‡çº§ï¼‰
   â†“ éœ€è¦é«˜æ•ˆå­˜å‚¨å’Œè®¿é—®

4. Pythonåˆ—è¡¨å¤ªæ…¢ã€å¤ªå å†…å­˜
   â†“ ä½¿ç”¨NumPyæ•°ç»„ï¼ˆè¿ç»­å†…å­˜ã€å›ºå®šç±»å‹ï¼‰

5. éœ€è¦è®¡ç®—ç›¸ä¼¼åº¦ï¼ˆçŸ©é˜µè¿ç®—ï¼‰
   â†“ ä½¿ç”¨NumPyå‘é‡åŒ–è¿ç®—ï¼ˆå¿«100å€ï¼‰

6. éœ€è¦æŒ‰ç›¸ä¼¼åº¦æ’åºã€è¿‡æ»¤
   â†“ ä½¿ç”¨NumPyç´¢å¼•ï¼ˆåˆ‡ç‰‡ã€å¸ƒå°”ã€èŠ±å¼ï¼‰

7. éœ€è¦æ‰¹é‡å¤„ç†ã€å½¢çŠ¶è°ƒæ•´
   â†“ ä½¿ç”¨NumPy reshapeã€å¹¿æ’­ï¼ˆä¸‹èŠ‚è¯¾ï¼‰

8. NumPyæ•°ç»„æ˜¯å‘é‡æ•°æ®åº“çš„åŸºçŸ³ï¼
```

---

#### 5. å®é™…æ¡ˆä¾‹ï¼šä»é›¶æ„å»ºç®€å•å‘é‡æ•°æ®åº“

**ä»…ç”¨NumPyæ•°ç»„çš„åˆ›å»ºå’Œç´¢å¼•åŠŸèƒ½**

```python
import numpy as np

class SimpleVectorDB:
    """
    ç”¨NumPyæ•°ç»„å®ç°çš„ç®€å•å‘é‡æ•°æ®åº“
    åªç”¨æœ¬èŠ‚è¯¾çš„çŸ¥è¯†ï¼šåˆ›å»ºæ•°ç»„ã€ç´¢å¼•
    """

    def __init__(self, dimension):
        """åˆå§‹åŒ–ï¼šé¢„åˆ†é…ç©ºé—´"""
        self.dimension = dimension
        self.embeddings = np.zeros((0, dimension), dtype=np.float32)
        self.texts = []

    def add(self, text, embedding):
        """æ·»åŠ æ–‡æ¡£ï¼šæ•°ç»„æ‹¼æ¥"""
        # éªŒè¯ç»´åº¦
        assert len(embedding) == self.dimension, "ç»´åº¦ä¸åŒ¹é…"

        # æ‰©å±•æ•°ç»„ï¼ˆå®é™…ä¸­ä¼šé¢„åˆ†é…é¿å…é¢‘ç¹æ‰©å±•ï¼‰
        embedding_2d = np.array([embedding], dtype=np.float32)
        self.embeddings = np.vstack([self.embeddings, embedding_2d])
        self.texts.append(text)

    def search(self, query_embedding, top_k=5):
        """æœç´¢ï¼šç‚¹ç§¯ç›¸ä¼¼åº¦ + æ’åº + ç´¢å¼•"""
        # è®¡ç®—ç›¸ä¼¼åº¦ï¼ˆä¸‹èŠ‚è¯¾è¯¦ç»†è®²ï¼‰
        similarities = self.embeddings @ query_embedding

        # æ’åºç´¢å¼•ï¼ˆé™åºï¼‰
        sorted_indices = np.argsort(similarities)[::-1]

        # å–Top-Kï¼ˆåˆ‡ç‰‡ç´¢å¼•ï¼‰
        top_k_indices = sorted_indices[:top_k]

        # æå–ç»“æœï¼ˆèŠ±å¼ç´¢å¼•ï¼‰
        results = []
        for idx in top_k_indices:
            results.append({
                'text': self.texts[idx],
                'score': similarities[idx],
                'embedding': self.embeddings[idx]
            })

        return results

    def filter_by_threshold(self, query_embedding, threshold=0.8):
        """é˜ˆå€¼è¿‡æ»¤ï¼šå¸ƒå°”ç´¢å¼•"""
        # è®¡ç®—ç›¸ä¼¼åº¦
        similarities = self.embeddings @ query_embedding

        # å¸ƒå°”ç´¢å¼•ï¼ˆæ¡ä»¶è¿‡æ»¤ï¼‰
        mask = similarities > threshold
        high_conf_indices = np.where(mask)[0]

        # æå–ç»“æœ
        results = []
        for idx in high_conf_indices:
            results.append({
                'text': self.texts[idx],
                'score': similarities[idx]
            })

        return results

# ä½¿ç”¨ç¤ºä¾‹
db = SimpleVectorDB(dimension=4)

# æ·»åŠ æ–‡æ¡£
db.add("Pythonç¼–ç¨‹", np.array([0.9, 0.1, 0.8, 0.2]))
db.add("NumPyè®¡ç®—", np.array([0.8, 0.2, 0.9, 0.1]))
db.add("å‘é‡æ•°æ®åº“", np.array([0.7, 0.3, 0.85, 0.15]))
db.add("è‹¹æœæ°´æœ", np.array([0.1, 0.9, 0.2, 0.8]))
db.add("é¦™è•‰æ°´æœ", np.array([0.2, 0.8, 0.1, 0.9]))

# æœç´¢
query = np.array([0.85, 0.15, 0.75, 0.25])
results = db.search(query, top_k=3)

print("=== Top-3æœç´¢ç»“æœ ===")
for i, r in enumerate(results):
    print(f"{i+1}. [{r['score']:.3f}] {r['text']}")

# é˜ˆå€¼è¿‡æ»¤
print("\n=== ç›¸ä¼¼åº¦>0.8çš„ç»“æœ ===")
high_conf = db.filter_by_threshold(query, threshold=0.8)
for r in high_conf:
    print(f"[{r['score']:.3f}] {r['text']}")
```

**è¾“å‡ºï¼š**
```
=== Top-3æœç´¢ç»“æœ ===
1. [1.555] NumPyè®¡ç®—
2. [1.545] Pythonç¼–ç¨‹
3. [1.463] å‘é‡æ•°æ®åº“

=== ç›¸ä¼¼åº¦>0.8çš„ç»“æœ ===
No results above threshold
```

**ç”¨åˆ°çš„çŸ¥è¯†ç‚¹ï¼š**
- âœ… åˆ›å»ºæ•°ç»„ï¼š`np.zeros()`, `np.array()`
- âœ… æ•°ç»„æ‹¼æ¥ï¼š`np.vstack()`
- âœ… ç´¢å¼•æ’åºï¼š`np.argsort()`
- âœ… åˆ‡ç‰‡ç´¢å¼•ï¼š`sorted_indices[:top_k]`
- âœ… èŠ±å¼ç´¢å¼•ï¼š`self.embeddings[idx]`
- âœ… å¸ƒå°”ç´¢å¼•ï¼š`similarities > threshold`

**è¿™å°±æ˜¯å‘é‡æ•°æ®åº“çš„æ ¸å¿ƒï¼**

---

#### 6. ä¸€å¥è¯æ€»ç»“ç¬¬ä¸€æ€§åŸç†

**NumPyæ•°ç»„æ˜¯è¿ç»­å†…å­˜ä¸Šçš„åŒç±»å‹æ•°æ®é›†åˆï¼Œé€šè¿‡ç»•è¿‡Pythonè§£é‡Šå™¨ç›´æ¥åœ¨Cå±‚é¢æ‰§è¡Œè¿ç®—ï¼Œå®ç°äº†é«˜æ€§èƒ½æ•°å€¼è®¡ç®—ï¼Œæ˜¯å‘é‡æ•°æ®åº“ç­‰å¤§è§„æ¨¡æ•°æ®å¤„ç†åº”ç”¨çš„åŸºçŸ³ã€‚**

---

## 3. ã€3ä¸ªæ ¸å¿ƒæ¦‚å¿µã€‘

### æ ¸å¿ƒæ¦‚å¿µ1ï¼šè¿ç»­å†…å­˜å¸ƒå±€ ğŸ§±

**NumPyæ•°ç»„çš„æ•°æ®å­˜å‚¨åœ¨è¿ç»­çš„å†…å­˜å—ä¸­ï¼Œè¿™æ˜¯é«˜æ€§èƒ½çš„æ ¹æœ¬åŸå› **

#### å¯¹æ¯”ï¼šPythonåˆ—è¡¨ vs NumPyæ•°ç»„

**Pythonåˆ—è¡¨ï¼ˆåˆ†æ•£å­˜å‚¨ï¼‰ï¼š**
```
åˆ—è¡¨å¯¹è±¡: [æŒ‡é’ˆ1] [æŒ‡é’ˆ2] [æŒ‡é’ˆ3]
              â†“       â†“       â†“
å†…å­˜æ•£å¸ƒ: [intå¯¹è±¡1] ... [intå¯¹è±¡2] ... [intå¯¹è±¡3]
```

**NumPyæ•°ç»„ï¼ˆè¿ç»­å­˜å‚¨ï¼‰ï¼š**
```
æ•°ç»„å¯¹è±¡: [å…ƒæ•°æ®] â†’ [è¿ç»­å†…å­˜å—: 1 2 3 4 5 ...]
```

#### ä»£ç æ¼”ç¤º

```python
import numpy as np

arr = np.array([1, 2, 3, 4, 5], dtype=np.int32)

# æŸ¥çœ‹å†…å­˜å¸ƒå±€
print(f"æ•°ç»„é¦–åœ°å€: {arr.ctypes.data}")
print(f"ç¬¬1ä¸ªå…ƒç´ åœ°å€: {arr[0].ctypes.data}")
print(f"ç¬¬2ä¸ªå…ƒç´ åœ°å€: {arr[1].ctypes.data}")
print(f"åœ°å€å·®: {arr[1].ctypes.data - arr[0].ctypes.data} å­—èŠ‚")  # 4å­—èŠ‚ï¼ˆint32ï¼‰

# éªŒè¯è¿ç»­æ€§
print(f"æ˜¯å¦è¿ç»­: {arr.flags['C_CONTIGUOUS']}")  # True
```

#### è¿ç»­å†…å­˜çš„ä¸‰å¤§ä¼˜åŠ¿

**1. ç¼“å­˜å‹å¥½ï¼ˆCache Localityï¼‰**
```
CPUä»å†…å­˜åŠ è½½æ•°æ®æ—¶ï¼Œä¼šä¸€æ¬¡æ€§åŠ è½½ä¸€å—ï¼ˆcache lineï¼‰
è¿ç»­å­˜å‚¨ â†’ ä¸€æ¬¡åŠ è½½å¤šä¸ªå…ƒç´  â†’ åç»­è®¿é—®å‘½ä¸­ç¼“å­˜ â†’ å¿«
```

**2. å‘é‡åŒ–è®¡ç®—ï¼ˆSIMDï¼‰**
```
è¿ç»­å†…å­˜ â†’ CPUå¯ç”¨SIMDæŒ‡ä»¤ä¸€æ¬¡å¤„ç†å¤šä¸ªæ•°æ® â†’ å¿«
ä¾‹ï¼šä¸€æ¡æŒ‡ä»¤åŒæ—¶è®¡ç®—4ä¸ªæµ®ç‚¹æ•°çš„å¹³æ–¹
```

**3. æŒ‡é’ˆè¿ç®—ç®€å•**
```
è®¿é—®ç¬¬iä¸ªå…ƒç´  = é¦–åœ°å€ + iÃ—å…ƒç´ å¤§å°
O(1)æ—¶é—´å¤æ‚åº¦ï¼Œæ— éœ€éå†
```

#### åœ¨å‘é‡æ•°æ®åº“ä¸­çš„åº”ç”¨

```python
# å‘é‡æ•°æ®åº“å­˜å‚¨100ä¸‡ä¸ª768ç»´embedding
embeddings = np.zeros((1000000, 768), dtype=np.float32)

# è¿ç»­å­˜å‚¨çš„å¥½å¤„ï¼š
# 1. å†…å­˜å ç”¨ï¼š100ä¸‡Ã—768Ã—4å­—èŠ‚ = 3GBï¼ˆç²¾ç¡®å¯æ§ï¼‰
# 2. è®¿é—®é€Ÿåº¦ï¼šé€šè¿‡æŒ‡é’ˆè¿ç®—ç›´æ¥å®šä½ä»»æ„embedding
# 3. æ‰¹é‡è®¡ç®—ï¼šå¯ç”¨SIMDæŒ‡ä»¤åŠ é€Ÿç›¸ä¼¼åº¦è®¡ç®—

# è·å–ç¬¬iä¸ªembeddingï¼ˆO(1)æ—¶é—´ï¼‰
i = 12345
embedding_i = embeddings[i]  # ç›´æ¥æŒ‡é’ˆåç§»ï¼Œæå¿«
```

---

### æ ¸å¿ƒæ¦‚å¿µ2ï¼šå›ºå®šç±»å‹ä¸å›ºå®šå½¢çŠ¶ ğŸ”’

**NumPyæ•°ç»„çš„ç±»å‹å’Œå½¢çŠ¶åœ¨åˆ›å»ºæ—¶ç¡®å®šï¼Œä¹‹åä¸å¯æ”¹å˜ï¼ˆé™¤éåˆ›å»ºæ–°æ•°ç»„ï¼‰**

#### dtypeï¼šå›ºå®šæ•°æ®ç±»å‹

```python
import numpy as np

# åˆ›å»ºæ—¶æŒ‡å®šç±»å‹
arr_int = np.array([1, 2, 3], dtype=np.int32)
arr_float = np.array([1.0, 2.0, 3.0], dtype=np.float32)

print(arr_int.dtype)    # int32
print(arr_float.dtype)  # float32

# ç±»å‹å›ºå®šåä¸èƒ½æ”¹å˜ï¼ˆåªèƒ½åˆ›å»ºæ–°æ•°ç»„ï¼‰
# arr_int.dtype = np.float32  # âŒ æŠ¥é”™ï¼

# è½¬æ¢ç±»å‹ = åˆ›å»ºæ–°æ•°ç»„
arr_converted = arr_int.astype(np.float32)  # åˆ›å»ºäº†æ–°æ•°ç»„
```

**ç±»å‹å›ºå®šçš„å¥½å¤„ï¼š**
- ç¼–è¯‘å™¨ä¼˜åŒ–ï¼šæå‰çŸ¥é“ç±»å‹ â†’ ç”Ÿæˆä¼˜åŒ–çš„æœºå™¨ç 
- å†…å­˜ç´§å‡‘ï¼šä¸éœ€è¦å­˜å‚¨ç±»å‹ä¿¡æ¯ â†’ æ¯ä¸ªå…ƒç´ åªå­˜æ•°æ®
- å‘é‡åŒ–ï¼šç±»å‹ç»Ÿä¸€ â†’ å¯ç”¨SIMDæŒ‡ä»¤æ‰¹é‡å¤„ç†

#### shapeï¼šå›ºå®šå½¢çŠ¶

```python
arr = np.array([1, 2, 3, 4, 5])
print(arr.shape)  # (5,)

# ä¸èƒ½ç›´æ¥æ”¹å˜å½¢çŠ¶
# arr.shape = (10,)  # âŒ æŠ¥é”™ï¼šå…ƒç´ æ•°é‡ä¸åŒ¹é…

# reshapeï¼šè§†å›¾ï¼ˆä¸æ”¹å˜æ•°æ®ï¼‰
reshaped = arr.reshape(5, 1)  # å¯ä»¥ï¼Œ5Ã—1=5
# arr.reshape(2, 3)  # âŒ æŠ¥é”™ï¼š2Ã—3=6â‰ 5

# è¦æ”¹å˜å…ƒç´ æ•°é‡ â†’ åˆ›å»ºæ–°æ•°ç»„
new_arr = np.array([1, 2, 3, 4, 5, 6, 7, 8, 9, 10])
```

#### ä¸ºä»€ä¹ˆå›ºå®šå½¢çŠ¶ï¼Ÿ

**å†…å­˜é¢„åˆ†é…ï¼š**
```python
# å›ºå®šå½¢çŠ¶ â†’ ä¸€æ¬¡æ€§åˆ†é…å†…å­˜ â†’ é«˜æ•ˆ
embeddings = np.zeros((1000000, 768))  # ç«‹å³åˆ†é…3GBè¿ç»­å†…å­˜

# vs Pythonåˆ—è¡¨ï¼ˆåŠ¨æ€å¤§å°ï¼‰
embeddings_list = []
for _ in range(1000000):
    embeddings_list.append([0.0] * 768)  # å¤šæ¬¡å†…å­˜åˆ†é…ï¼Œæ…¢ä¸”ç¢ç‰‡åŒ–
```

#### åœ¨å‘é‡æ•°æ®åº“ä¸­çš„åº”ç”¨

```python
# å‘é‡æ•°æ®åº“è¦æ±‚æ‰€æœ‰embeddingç»´åº¦ç›¸åŒ
embed_dim = 768  # OpenAI, BERTç­‰æ¨¡å‹çš„è¾“å‡ºç»´åº¦

# âŒ é”™è¯¯åšæ³•ï¼šç»´åº¦ä¸ä¸€è‡´
embeddings_bad = [
    np.array([0.1, 0.2, 0.3]),       # 3ç»´
    np.array([0.4, 0.5]),            # 2ç»´ - ä¸ä¸€è‡´ï¼
]

# âœ… æ­£ç¡®åšæ³•ï¼šé¢„åˆ†é…å›ºå®šå½¢çŠ¶
num_docs = 10000
embeddings_good = np.zeros((num_docs, embed_dim), dtype=np.float32)

# å¡«å……æ•°æ®
for i, doc in enumerate(documents):
    embeddings_good[i] = model.encode(doc)  # å¿…é¡»æ˜¯768ç»´

# å¥½å¤„ï¼š
# 1. æ‰€æœ‰embeddingå¯¹é½ â†’ çŸ©é˜µè¿ç®—é«˜æ•ˆ
# 2. å†…å­˜å¸ƒå±€è§„æ•´ â†’ ç¼“å­˜å‹å¥½
# 3. å½¢çŠ¶æ£€æŸ¥ â†’ è‡ªåŠ¨å‘ç°ç»´åº¦é”™è¯¯
```

---

### æ ¸å¿ƒæ¦‚å¿µ3ï¼šç´¢å¼•çš„åŒé‡æ€§è´¨ï¼ˆè§†å›¾vså‰¯æœ¬ï¼‰ğŸ‘¥

**NumPyç´¢å¼•æœ‰ä¸¤ç§è¿”å›æ–¹å¼ï¼šè§†å›¾ï¼ˆå†…å­˜å…±äº«ï¼‰å’Œå‰¯æœ¬ï¼ˆç‹¬ç«‹å†…å­˜ï¼‰ï¼Œè¿™æ˜¯æ€§èƒ½ä¼˜åŒ–çš„å…³é”®**

#### ç´¢å¼•ç±»å‹å¯¹æ¯”

| ç´¢å¼•ç±»å‹ | è¿”å› | ä¿®æ”¹æ˜¯å¦å½±å“åŸæ•°ç»„ | æ€§èƒ½ | ç¤ºä¾‹ |
|---------|------|------------------|------|------|
| å•å…ƒç´  | æ ‡é‡ | N/A | å¿« | `arr[5]` |
| åˆ‡ç‰‡ | è§†å›¾ | æ˜¯ | æœ€å¿« | `arr[1:10]` |
| å¸ƒå°” | å‰¯æœ¬ | å¦ | ä¸­ç­‰ | `arr[arr > 5]` |
| èŠ±å¼ | å‰¯æœ¬ | å¦ | ä¸­ç­‰ | `arr[[1,5,9]]` |

#### è¯¦ç»†æ¼”ç¤º

```python
import numpy as np

arr = np.array([0, 10, 20, 30, 40, 50])
print(f"åŸæ•°ç»„: {arr}")

# ===== åˆ‡ç‰‡ â†’ è§†å›¾ =====
slice_view = arr[1:4]
print(f"\nåˆ‡ç‰‡ç»“æœ: {slice_view}")  # [10 20 30]

# ä¿®æ”¹è§†å›¾
slice_view[0] = 999
print(f"ä¿®æ”¹è§†å›¾åï¼ŒåŸæ•°ç»„: {arr}")  # [0 999 20 30 40 50] - è¢«æ”¹äº†ï¼

# ===== å¸ƒå°”ç´¢å¼• â†’ å‰¯æœ¬ =====
arr = np.array([0, 10, 20, 30, 40, 50])  # é‡ç½®
bool_copy = arr[arr > 20]
print(f"\nå¸ƒå°”ç´¢å¼•ç»“æœ: {bool_copy}")  # [30 40 50]

# ä¿®æ”¹å‰¯æœ¬
bool_copy[0] = 888
print(f"ä¿®æ”¹å‰¯æœ¬åï¼ŒåŸæ•°ç»„: {arr}")  # [0 10 20 30 40 50] - æ²¡å˜

# ===== èŠ±å¼ç´¢å¼• â†’ å‰¯æœ¬ =====
fancy_copy = arr[[1, 3, 5]]
print(f"\nèŠ±å¼ç´¢å¼•ç»“æœ: {fancy_copy}")  # [10 30 50]

# ä¿®æ”¹å‰¯æœ¬
fancy_copy[0] = 777
print(f"ä¿®æ”¹å‰¯æœ¬åï¼ŒåŸæ•°ç»„: {arr}")  # [0 10 20 30 40 50] - æ²¡å˜
```

#### ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ

**åˆ‡ç‰‡ â†’ è§†å›¾ï¼ˆé«˜æ•ˆï¼‰**
```python
# åˆ‡ç‰‡æ˜¯è¿ç»­çš„å†…å­˜æ®µï¼Œå¯ä»¥ç”¨æŒ‡é’ˆè¡¨ç¤º
arr = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
view = arr[2:7]  # [2, 3, 4, 5, 6]

# å®ç°ï¼šè§†å›¾åªå­˜å‚¨ (èµ·å§‹æŒ‡é’ˆ, é•¿åº¦, æ­¥é•¿)
# view = (arr.data + 2*itemsize, 5, 1)
# ä¸éœ€è¦å¤åˆ¶æ•°æ®ï¼
```

**å¸ƒå°”/èŠ±å¼ç´¢å¼• â†’ å‰¯æœ¬ï¼ˆå¿…é¡»ï¼‰**
```python
# å¸ƒå°”ç´¢å¼•é€‰æ‹©çš„æ˜¯ä¸è¿ç»­çš„å…ƒç´ 
arr = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
result = arr[[1, 3, 7, 9]]  # [1, 3, 7, 9]

# æ— æ³•ç”¨æŒ‡é’ˆè¡¨ç¤ºè¿™ä¸ªä¸è§„åˆ™çš„é€‰æ‹©
# å¿…é¡»å¤åˆ¶æ•°æ®åˆ°æ–°å†…å­˜
```

#### æ£€æŸ¥æ–¹æ³•

```python
# æ–¹æ³•1ï¼šæ£€æŸ¥baseå±æ€§
arr = np.array([1, 2, 3, 4, 5])
view = arr[1:4]
copy = arr[[1, 2, 3]]

print(view.base is arr)  # True - è§†å›¾
print(copy.base is None) # True - å‰¯æœ¬

# æ–¹æ³•2ï¼šä½¿ç”¨shares_memory
print(np.shares_memory(arr, view))  # True - è§†å›¾
print(np.shares_memory(arr, copy))  # False - å‰¯æœ¬
```

#### åœ¨å‘é‡æ•°æ®åº“ä¸­çš„åº”ç”¨

```python
# åœºæ™¯1ï¼šå–Top-Kç»“æœï¼ˆç”¨åˆ‡ç‰‡ï¼Œè§†å›¾ï¼‰
embeddings = np.random.rand(100000, 768)
sorted_indices = np.argsort(similarity_scores)[::-1]  # é™åºæ’åº

# å–å‰10ä¸ªï¼ˆè§†å›¾ï¼Œé«˜æ•ˆï¼‰
top_10_indices = sorted_indices[:10]
top_10_embeddings = embeddings[top_10_indices]  # èŠ±å¼ç´¢å¼• â†’ å‰¯æœ¬

# æ³¨æ„ï¼šè¿™é‡Œæ˜¯å‰¯æœ¬ï¼ˆèŠ±å¼ç´¢å¼•ï¼‰ï¼Œä¿®æ”¹ä¸å½±å“åŸæ•°æ®

# åœºæ™¯2ï¼šé˜ˆå€¼è¿‡æ»¤ï¼ˆå¸ƒå°”ç´¢å¼•ï¼Œå‰¯æœ¬ï¼‰
threshold = 0.85
high_confidence = embeddings[similarity_scores > threshold]  # å‰¯æœ¬

# å¯ä»¥å®‰å…¨ä¿®æ”¹ï¼ˆä¸å½±å“åŸæ•°æ®ï¼‰
high_confidence *= 2  # åŸembeddingsä¸å˜

# åœºæ™¯3ï¼šéœ€è¦è§†å›¾ï¼ˆèŠ‚çœå†…å­˜ï¼‰
# å¤„ç†å‰1000ä¸ªembeddingï¼Œä¸åˆ›å»ºå‰¯æœ¬
subset = embeddings[:1000]  # è§†å›¾
# å°å¿ƒï¼šä¿®æ”¹subsetä¼šå½±å“embeddingsï¼

# å®‰å…¨åšæ³•ï¼šæ˜¾å¼å¤åˆ¶
subset_safe = embeddings[:1000].copy()
subset_safe *= 2  # åŸæ•°æ®ä¸å—å½±å“
```

#### æ€§èƒ½å¯¹æ¯”

```python
import time

arr = np.random.rand(10000000)  # 1000ä¸‡ä¸ªå…ƒç´ 

# åˆ‡ç‰‡ï¼ˆè§†å›¾ï¼‰- æå¿«
start = time.time()
view = arr[1000:9000]
time_view = time.time() - start

# å¸ƒå°”ç´¢å¼•ï¼ˆå‰¯æœ¬ï¼‰- è¾ƒæ…¢
start = time.time()
copy = arr[arr > 0.5]
time_copy = time.time() - start

print(f"è§†å›¾åˆ›å»ºæ—¶é—´: {time_view:.6f}ç§’")    # ~0.000001ç§’
print(f"å‰¯æœ¬åˆ›å»ºæ—¶é—´: {time_copy:.6f}ç§’")    # ~0.02ç§’
print(f"å‰¯æœ¬æ…¢{time_copy/time_view:.0f}å€")  # çº¦20000å€
```

**å…³é”®ç‚¹ï¼š**
- è§†å›¾ï¼šO(1)æ—¶é—´ï¼Œä¸å¤åˆ¶æ•°æ®ï¼Œæå¿«
- å‰¯æœ¬ï¼šO(n)æ—¶é—´ï¼Œå¤åˆ¶å…¨éƒ¨æ•°æ®ï¼Œæ…¢ä½†å®‰å…¨

---

## 4. ã€æœ€å°å¯ç”¨ã€‘æŒæ¡20%è§£å†³80%é—®é¢˜

æŒæ¡ä»¥ä¸‹å†…å®¹ï¼Œå°±èƒ½å¼€å§‹ä½¿ç”¨å‘é‡æ•°æ®åº“ï¼š

### 3.1 åˆ›å»ºæ•°ç»„çš„5ç§æ ¸å¿ƒæ–¹æ³•

#### æ–¹æ³•1ï¼šä»åˆ—è¡¨åˆ›å»ºï¼ˆæœ€å¸¸ç”¨ï¼‰

```python
import numpy as np

# ä¸€ç»´æ•°ç»„ï¼ˆå‘é‡ï¼‰
vector = np.array([1, 2, 3, 4, 5])
print(f"ä¸€ç»´: {vector}, å½¢çŠ¶: {vector.shape}")  # (5,)

# äºŒç»´æ•°ç»„ï¼ˆå¤šä¸ªå‘é‡/çŸ©é˜µï¼‰
matrix = np.array([
    [1, 2, 3],
    [4, 5, 6]
])
print(f"äºŒç»´: {matrix.shape}")  # (2, 3) - 2ä¸ªå‘é‡ï¼Œæ¯ä¸ª3ç»´
```

**åº”ç”¨ï¼š** æ‰‹åŠ¨åˆ›å»ºå°‘é‡embeddingæµ‹è¯•

---

#### æ–¹æ³•2ï¼šåˆ›å»ºå…¨é›¶/å…¨ä¸€æ•°ç»„ï¼ˆåˆå§‹åŒ–ï¼‰

```python
# å…¨é›¶æ•°ç»„ï¼ˆæœ€å¸¸ç”¨ï¼šé¢„åˆ†é…ç©ºé—´ï¼‰
zeros = np.zeros(5)              # ä¸€ç»´ï¼š[0. 0. 0. 0. 0.]
zeros_matrix = np.zeros((3, 4))  # äºŒç»´ï¼š3è¡Œ4åˆ—å…¨é›¶

# å…¨ä¸€æ•°ç»„
ones = np.ones(5)                # [1. 1. 1. 1. 1.]

# æŒ‡å®šæ•°æ®ç±»å‹ï¼ˆèŠ‚çœå†…å­˜ï¼‰
zeros_int = np.zeros(5, dtype=np.int32)      # æ•´æ•°
zeros_float = np.zeros(5, dtype=np.float32)  # 32ä½æµ®ç‚¹ï¼ˆå¸¸ç”¨ï¼‰
```

**åº”ç”¨ï¼š** å‘é‡æ•°æ®åº“ä¸­é¢„åˆ†é…embeddingå­˜å‚¨ç©ºé—´

```python
# ä¸º1000ä¸ªæ–‡æ¡£é¢„åˆ†é…768ç»´embeddingç©ºé—´
embeddings = np.zeros((1000, 768), dtype=np.float32)
```

---

#### æ–¹æ³•3ï¼šåˆ›å»ºéšæœºæ•°ç»„ï¼ˆæµ‹è¯•æ•°æ®ï¼‰

```python
# å‡åŒ€åˆ†å¸ƒ [0, 1)
random_uniform = np.random.rand(5)        # ä¸€ç»´
random_matrix = np.random.rand(3, 4)      # äºŒç»´

# æ ‡å‡†æ­£æ€åˆ†å¸ƒï¼ˆå‡å€¼0ï¼Œæ ‡å‡†å·®1ï¼‰
random_normal = np.random.randn(5)

# éšæœºæ•´æ•°
random_int = np.random.randint(0, 10, size=5)  # [0, 10)èŒƒå›´çš„5ä¸ªæ•´æ•°
```

**åº”ç”¨ï¼š** ç”Ÿæˆæ¨¡æ‹Ÿembeddingè¿›è¡Œå‘é‡æ•°æ®åº“æµ‹è¯•

---

#### æ–¹æ³•4ï¼šç­‰å·®æ•°åˆ—ï¼ˆåºåˆ—ç”Ÿæˆï¼‰

```python
# arangeï¼šç±»ä¼¼Pythonçš„range
arr = np.arange(0, 10, 2)  # [0 2 4 6 8] - æ­¥é•¿2

# linspaceï¼šç­‰åˆ†åŒºé—´
arr = np.linspace(0, 1, 5)  # [0.   0.25 0.5  0.75 1.  ] - 5ä¸ªç­‰è·ç‚¹
```

**åº”ç”¨ï¼š** ç”Ÿæˆæµ‹è¯•ç´¢å¼•ã€æƒé‡åºåˆ—

---

#### æ–¹æ³•5ï¼šä»æ–‡ä»¶åŠ è½½ï¼ˆå®é™…åœºæ™¯ï¼‰

```python
# ä»CSVåŠ è½½
# embeddings = np.loadtxt('embeddings.csv', delimiter=',')

# ä»NumPyä¸“ç”¨æ ¼å¼åŠ è½½ï¼ˆå¿«ï¼‰
# embeddings = np.load('embeddings.npy')
```

**åº”ç”¨ï¼š** å‘é‡æ•°æ®åº“ä»æ–‡ä»¶å¯¼å…¥é¢„è®¡ç®—çš„embedding

---

### 3.2 ç´¢å¼•çš„4ç§æ ¸å¿ƒæ¨¡å¼

#### æ¨¡å¼1ï¼šå•å…ƒç´ ç´¢å¼•

```python
arr = np.array([10, 20, 30, 40, 50])

print(arr[0])    # 10 - ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆç´¢å¼•ä»0å¼€å§‹ï¼‰
print(arr[2])    # 30 - ç¬¬ä¸‰ä¸ªå…ƒç´ 
print(arr[-1])   # 50 - æœ€åä¸€ä¸ªå…ƒç´ 
print(arr[-2])   # 40 - å€’æ•°ç¬¬äºŒä¸ª
```

**åº”ç”¨ï¼š** è·å–ç‰¹å®šæ–‡æ¡£çš„embedding

---

#### æ¨¡å¼2ï¼šåˆ‡ç‰‡ç´¢å¼•ï¼ˆæœ€é‡è¦ï¼‰

```python
arr = np.array([10, 20, 30, 40, 50])

print(arr[1:4])   # [20 30 40] - ç´¢å¼•1åˆ°3ï¼ˆä¸åŒ…å«4ï¼‰
print(arr[:3])    # [10 20 30] - å‰3ä¸ª
print(arr[2:])    # [30 40 50] - ä»ç´¢å¼•2åˆ°æœ€å
print(arr[::2])   # [10 30 50] - æ¯éš”1ä¸ªå–1ä¸ªï¼ˆæ­¥é•¿2ï¼‰
print(arr[::-1])  # [50 40 30 20 10] - åè½¬
```

**åº”ç”¨ï¼š** å–Top-Kæ£€ç´¢ç»“æœã€æ‰¹å¤„ç†embedding

```python
# å‘é‡æ•°æ®åº“è¿”å›Top-10ç»“æœ
top_10_embeddings = all_embeddings[top_10_indices]
```

---

#### æ¨¡å¼3ï¼šå¸ƒå°”ç´¢å¼•ï¼ˆæ¡ä»¶è¿‡æ»¤ï¼‰

```python
arr = np.array([1, 5, 3, 8, 2])

# æ¡ä»¶ç­›é€‰
mask = arr > 3
print(mask)  # [False  True False  True False]
print(arr[mask])  # [5 8] - å¤§äº3çš„å…ƒç´ 

# ä¸€æ­¥åˆ°ä½
print(arr[arr > 3])  # [5 8]

# å¤åˆæ¡ä»¶
print(arr[(arr > 2) & (arr < 8)])  # [5 3] - æ³¨æ„ç”¨&å’Œ|ï¼Œä¸æ˜¯and/or
```

**åº”ç”¨ï¼š** æ ¹æ®ç›¸ä¼¼åº¦é˜ˆå€¼è¿‡æ»¤ç»“æœ

```python
# åªä¿ç•™ç›¸ä¼¼åº¦>0.8çš„ç»“æœ
high_confidence = embeddings[scores > 0.8]
```

---

#### æ¨¡å¼4ï¼šèŠ±å¼ç´¢å¼•ï¼ˆç´¢å¼•æ•°ç»„ï¼‰

```python
arr = np.array([10, 20, 30, 40, 50])

# ç”¨ç´¢å¼•æ•°ç»„é€‰æ‹©å…ƒç´ 
indices = [0, 2, 4]
print(arr[indices])  # [10 30 50]

# å¯ä»¥é‡å¤ã€ä¹±åº
indices = [2, 2, 0, 4]
print(arr[indices])  # [30 30 10 50]
```

**åº”ç”¨ï¼š** æ ¹æ®æ£€ç´¢åˆ°çš„ç´¢å¼•åˆ—è¡¨æå–embedding

```python
# å‘é‡æ•°æ®åº“è¿”å›ç›¸ä¼¼æ–‡æ¡£çš„ç´¢å¼•
similar_indices = [5, 12, 23, 7, 101]
similar_embeddings = all_embeddings[similar_indices]
```

---

### 3.3 å½¢çŠ¶æ“ä½œï¼ˆé‡å¡‘æ•°ç»„ï¼‰

```python
# åˆ›å»ºä¸€ç»´æ•°ç»„
arr = np.arange(12)  # [ 0  1  2  3  4  5  6  7  8  9 10 11]

# reshapeï¼šæ”¹å˜å½¢çŠ¶ï¼ˆä¸æ”¹å˜æ•°æ®ï¼‰
matrix = arr.reshape(3, 4)  # 3è¡Œ4åˆ—
print(matrix)
# [[ 0  1  2  3]
#  [ 4  5  6  7]
#  [ 8  9 10 11]]

# flattenï¼šå±•å¹³ä¸ºä¸€ç»´
flat = matrix.flatten()
print(flat)  # [ 0  1  2  3  4  5  6  7  8  9 10 11]

# è‡ªåŠ¨è®¡ç®—ç»´åº¦ï¼šç”¨-1
matrix = arr.reshape(3, -1)  # 3è¡Œï¼Œåˆ—æ•°è‡ªåŠ¨è®¡ç®—ä¸º4
```

**åº”ç”¨ï¼š** å‘é‡æ•°æ®åº“ä¸­batchå¤„ç†æ—¶è°ƒæ•´å½¢çŠ¶

```python
# å•ä¸ªembedding (768,) â†’ æ‰¹é‡ (1, 768)
single_embedding = np.array([0.1, 0.2, ..., 0.768])
batch_embedding = single_embedding.reshape(1, -1)
```

---

**è¿™äº›çŸ¥è¯†è¶³ä»¥ï¼š**
- âœ… åˆ›å»ºå’Œå­˜å‚¨å‘é‡æ•°æ®
- âœ… é«˜æ•ˆç´¢å¼•å’Œåˆ‡ç‰‡embedding
- âœ… æ ¹æ®æ¡ä»¶è¿‡æ»¤ç»“æœ
- âœ… å¤„ç†å‘é‡æ•°æ®åº“è¿”å›çš„ç´¢å¼•åˆ—è¡¨
- âœ… ä¸ºåç»­å­¦ä¹ ï¼ˆå‘é‡åŒ–è¿ç®—ã€å¹¿æ’­ï¼‰æ‰“åŸºç¡€

---

## 5. ã€1ä¸ªç±»æ¯”ã€‘ç”¨å‰ç«¯å¼€å‘ç†è§£

### ç±»æ¯”1ï¼šNumPyæ•°ç»„ = TypeScriptçš„ç±»å‹åŒ–æ•°ç»„ ğŸ¨

#### Pythonåˆ—è¡¨ vs NumPyæ•°ç»„ = JavaScriptæ•°ç»„ vs TypedArray

```javascript
// JavaScriptæ•°ç»„ï¼ˆç±»ä¼¼Pythonåˆ—è¡¨ï¼‰
const jsArray = [1, "hello", {name: "Alice"}, true];
// ä¼˜ç‚¹ï¼šçµæ´»ï¼Œå¯ä»¥æ··åˆç±»å‹
// ç¼ºç‚¹ï¼šæ€§èƒ½å·®ï¼Œå†…å­˜å ç”¨å¤§

// TypedArrayï¼ˆç±»ä¼¼NumPyæ•°ç»„ï¼‰
const typedArray = new Float32Array([1.0, 2.0, 3.0, 4.0]);
// ä¼˜ç‚¹ï¼šé«˜æ€§èƒ½ï¼Œå†…å­˜ç´§å‡‘
// ç¼ºç‚¹ï¼šç±»å‹å›ºå®šï¼Œä¸èƒ½æ··åˆ
```

```python
# NumPyæ•°ç»„
import numpy as np
numpy_array = np.array([1.0, 2.0, 3.0, 4.0], dtype=np.float32)
# å®Œå…¨ç­‰ä»·äºJavaScriptçš„Float32Arrayï¼
```

**ç›¸ä¼¼ç‚¹ï¼š**
- éƒ½æ˜¯è¿ç»­å†…å­˜ï¼Œç±»å‹å›ºå®š
- éƒ½ç”¨äºé«˜æ€§èƒ½è®¡ç®—ï¼ˆWebGL, Canvas, éŸ³è§†é¢‘å¤„ç†ï¼‰
- éƒ½æ¯”é€šç”¨å®¹å™¨å¿«å¾—å¤š

---

### ç±»æ¯”2ï¼šæ•°ç»„å½¢çŠ¶ = CSS Gridå¸ƒå±€ ğŸ“

```css
/* CSS Gridï¼š2Då¸ƒå±€ */
.container {
  display: grid;
  grid-template-columns: repeat(4, 1fr);  /* 4åˆ— */
  grid-template-rows: repeat(3, 1fr);     /* 3è¡Œ */
}
/* æ€»å…±12ä¸ªæ ¼å­ï¼Œå¸ƒå±€æ˜¯(3è¡Œ, 4åˆ—) */
```

```python
# NumPyæ•°ç»„ï¼š2Då½¢çŠ¶
import numpy as np
arr = np.arange(12).reshape(3, 4)
print(arr.shape)  # (3, 4) - 3è¡Œ4åˆ—
print(arr)
# [[ 0  1  2  3]
#  [ 4  5  6  7]
#  [ 8  9 10 11]]
```

**ç›¸ä¼¼ç‚¹ï¼š**
- Gridçš„ `grid-template` = NumPyçš„ `shape`
- æ€»å…ƒç´ æ•° = è¡ŒÃ—åˆ—ï¼ˆå¿…é¡»åŒ¹é…ï¼‰
- æ”¹å˜å¸ƒå±€ = reshapeï¼ˆæ•°æ®ä¸å˜ï¼‰

---

### ç±»æ¯”3ï¼šç´¢å¼• = CSSé€‰æ‹©å™¨ ğŸ”

#### å•å…ƒç´ ç´¢å¼• = IDé€‰æ‹©å™¨

```css
/* CSS: é€‰æ‹©ç‰¹å®šIDçš„å…ƒç´  */
#element-5 { color: red; }
```

```python
# NumPy: é€‰æ‹©ç‰¹å®šç´¢å¼•çš„å…ƒç´ 
arr = np.array([10, 20, 30, 40, 50])
element = arr[2]  # 30
```

---

#### åˆ‡ç‰‡ç´¢å¼• = :nth-childèŒƒå›´é€‰æ‹©å™¨

```css
/* CSS: é€‰æ‹©ç¬¬2åˆ°ç¬¬4ä¸ªå­å…ƒç´  */
li:nth-child(n+2):nth-child(-n+4) { background: yellow; }
```

```python
# NumPy: é€‰æ‹©ç´¢å¼•1åˆ°3çš„å…ƒç´ 
arr = np.array([10, 20, 30, 40, 50])
slice_result = arr[1:4]  # [20, 30, 40]
```

---

#### å¸ƒå°”ç´¢å¼• = å±æ€§é€‰æ‹©å™¨

```css
/* CSS: é€‰æ‹©æ‰€æœ‰æœ‰data-activeå±æ€§çš„å…ƒç´  */
[data-active="true"] { display: block; }
```

```python
# NumPy: é€‰æ‹©æ‰€æœ‰å¤§äº30çš„å…ƒç´ 
arr = np.array([10, 20, 30, 40, 50])
active = arr[arr > 30]  # [40, 50]
```

---

#### èŠ±å¼ç´¢å¼• = ç±»é€‰æ‹©å™¨ç»„åˆ

```css
/* CSS: é€‰æ‹©å¤šä¸ªç‰¹å®šç±»çš„å…ƒç´  */
.item-1, .item-3, .item-5 { font-weight: bold; }
```

```python
# NumPy: é€‰æ‹©å¤šä¸ªç‰¹å®šç´¢å¼•çš„å…ƒç´ 
arr = np.array([10, 20, 30, 40, 50])
selected = arr[[0, 2, 4]]  # [10, 30, 50]
```

---

### ç±»æ¯”4ï¼šè§†å›¾vså‰¯æœ¬ = Reactçš„æµ…æ‹·è´vsæ·±æ‹·è´ âš›ï¸

```javascript
// React: æµ…æ‹·è´ï¼ˆå¼•ç”¨å…±äº«ï¼‰
const originalState = {items: [1, 2, 3]};
const shallowCopy = originalState;  // å¼•ç”¨
shallowCopy.items[0] = 999;
console.log(originalState.items);  // [999, 2, 3] - åŸæ•°æ®è¢«æ”¹äº†ï¼

// React: æ·±æ‹·è´ï¼ˆç‹¬ç«‹æ•°æ®ï¼‰
const deepCopy = JSON.parse(JSON.stringify(originalState));
deepCopy.items[0] = 888;
console.log(originalState.items);  // [999, 2, 3] - åŸæ•°æ®ä¸å˜
```

```python
# NumPy: è§†å›¾ï¼ˆå¼•ç”¨å…±äº«ï¼‰
import numpy as np
arr = np.array([1, 2, 3, 4, 5])
view = arr[1:4]  # è§†å›¾
view[0] = 999
print(arr)  # [1, 999, 3, 4, 5] - åŸæ•°æ®è¢«æ”¹äº†ï¼

# NumPy: å‰¯æœ¬ï¼ˆç‹¬ç«‹æ•°æ®ï¼‰
copy = arr[1:4].copy()
copy[0] = 888
print(arr)  # [1, 999, 3, 4, 5] - åŸæ•°æ®ä¸å˜
```

**ç›¸ä¼¼ç‚¹ï¼š**
- æµ…æ‹·è´ = è§†å›¾ï¼ˆå¼•ç”¨ï¼Œå¿«ä½†å±é™©ï¼‰
- æ·±æ‹·è´ = å‰¯æœ¬ï¼ˆç‹¬ç«‹ï¼Œæ…¢ä½†å®‰å…¨ï¼‰
- Reactä¸­çš„ä¸å¯å˜æ›´æ–° = NumPyä¸­çš„`.copy()`

---

### ç±»æ¯”5ï¼šé¢„åˆ†é…æ•°ç»„ = Reactçš„è™šæ‹Ÿåˆ—è¡¨ ğŸ“œ

```javascript
// Reactè™šæ‹Ÿåˆ—è¡¨ï¼šé¢„åˆ†é…DOMèŠ‚ç‚¹ï¼Œå¤ç”¨
function VirtualList({ items, height }) {
  const [visibleItems] = useState(
    new Array(Math.ceil(height / ITEM_HEIGHT))  // é¢„åˆ†é…
  );

  // å¤ç”¨èŠ‚ç‚¹ï¼Œåªæ›´æ–°æ•°æ®
  return visibleItems.map((_, index) => (
    <Item key={index} data={items[startIndex + index]} />
  ));
}
```

```python
# NumPy: é¢„åˆ†é…æ•°ç»„ç©ºé—´ï¼Œå¡«å……æ•°æ®
import numpy as np

# é¢„åˆ†é…100ä¸‡ä¸ªembeddingçš„ç©ºé—´
num_docs = 1000000
embed_dim = 768
embeddings = np.zeros((num_docs, embed_dim), dtype=np.float32)

# é€ä¸ªå¡«å……ï¼ˆå¤ç”¨å†…å­˜ï¼Œä¸é‡æ–°åˆ†é…ï¼‰
for i, doc in enumerate(documents):
    embeddings[i] = model.encode(doc)  # ç›´æ¥å†™å…¥ï¼Œä¸åˆ›å»ºæ–°æ•°ç»„
```

**ç›¸ä¼¼ç‚¹ï¼š**
- éƒ½æ˜¯é¢„åˆ†é…å›ºå®šå¤§å°çš„ç©ºé—´
- éƒ½æ˜¯å¤ç”¨å†…å­˜ï¼Œé¿å…é¢‘ç¹åˆ†é…
- éƒ½æ˜¯æ€§èƒ½ä¼˜åŒ–çš„å…³é”®æŠ€æœ¯

---

### ç±»æ¯”6ï¼šreshape = Flexboxçš„flex-wrap ğŸ”„

```css
/* CSS: 12ä¸ªå…ƒç´ ï¼Œæ¯è¡Œ4ä¸ª */
.container {
  display: flex;
  flex-wrap: wrap;
  width: 400px;  /* æ¯ä¸ªå…ƒç´ 100pxï¼Œ4ä¸ªä¸€è¡Œ */
}
/* ç»“æœï¼šè‡ªåŠ¨æ’åˆ—æˆ3è¡Œ4åˆ— */
```

```python
# NumPy: 12ä¸ªå…ƒç´ ï¼Œreshapeæˆ3è¡Œ4åˆ—
arr = np.arange(12)
reshaped = arr.reshape(3, 4)
# [[ 0  1  2  3]
#  [ 4  5  6  7]
#  [ 8  9 10 11]]
```

**ç›¸ä¼¼ç‚¹ï¼š**
- éƒ½ä¸æ”¹å˜å…ƒç´ æœ¬èº«ï¼Œåªæ”¹å˜æ’åˆ—æ–¹å¼
- å…ƒç´ æ€»æ•°ä¿æŒä¸å˜
- ä»ä¸€ç»´åˆ°äºŒç»´çš„è½¬æ¢

---

### ç±»æ¯”æ€»ç»“è¡¨ ğŸ“Š

| NumPyæ¦‚å¿µ | å‰ç«¯ç±»æ¯” | ä»£ç å¯¹åº” |
|----------|---------|---------|
| NumPyæ•°ç»„ | TypedArray | `new Float32Array([...])` |
| Pythonåˆ—è¡¨ | JavaScriptæ•°ç»„ | `[1, "hello", true]` |
| æ•°ç»„å½¢çŠ¶ | CSS Gridå¸ƒå±€ | `grid-template: 3 / 4` |
| å•å…ƒç´ ç´¢å¼• | IDé€‰æ‹©å™¨ | `#element-5` |
| åˆ‡ç‰‡ç´¢å¼• | :nth-childèŒƒå›´ | `:nth-child(2):nth-child(-n+4)` |
| å¸ƒå°”ç´¢å¼• | å±æ€§é€‰æ‹©å™¨ | `[data-active="true"]` |
| èŠ±å¼ç´¢å¼• | ç±»é€‰æ‹©å™¨ç»„åˆ | `.item-1, .item-3` |
| è§†å›¾ | æµ…æ‹·è´ï¼ˆå¼•ç”¨ï¼‰ | `shallowCopy = original` |
| å‰¯æœ¬ | æ·±æ‹·è´ | `JSON.parse(JSON.stringify())` |
| é¢„åˆ†é… | è™šæ‹Ÿåˆ—è¡¨ | `new Array(1000)` |
| reshape | flex-wrap | `flex-wrap: wrap` |

---

## 6. ã€åç›´è§‰ç‚¹ã€‘æœ€å®¹æ˜“é”™çš„3ä¸ªè¯¯åŒº

### è¯¯åŒº1ï¼šNumPyæ•°ç»„å°±æ˜¯Pythonåˆ—è¡¨ âŒ

**ä¸ºä»€ä¹ˆé”™ï¼Ÿ**
- NumPyæ•°ç»„å­˜å‚¨åœ¨**è¿ç»­å†…å­˜å—**ä¸­ï¼Œæ‰€æœ‰å…ƒç´ ç±»å‹ç›¸åŒ
- Pythonåˆ—è¡¨æ˜¯**æŒ‡é’ˆæ•°ç»„**ï¼Œæ¯ä¸ªå…ƒç´ å¯ä»¥æ˜¯ä¸åŒç±»å‹ï¼Œåˆ†æ•£å­˜å‚¨
- NumPyæ•°ç»„æ”¯æŒ**å‘é‡åŒ–è¿ç®—**ï¼ˆCè¯­è¨€çº§åˆ«é€Ÿåº¦ï¼‰
- Pythonåˆ—è¡¨åªèƒ½å¾ªç¯å¤„ç†ï¼ˆPythonè§£é‡Šå™¨é€Ÿåº¦ï¼‰

```python
import numpy as np
import sys

# Pythonåˆ—è¡¨
python_list = [1, 2, 3, 4, 5]
print(f"åˆ—è¡¨ä¸­ä¸€ä¸ªå…ƒç´ å ç”¨: {sys.getsizeof(python_list[0])} å­—èŠ‚")  # 28å­—èŠ‚

# NumPyæ•°ç»„
numpy_array = np.array([1, 2, 3, 4, 5], dtype=np.int32)
print(f"æ•°ç»„ä¸­ä¸€ä¸ªå…ƒç´ å ç”¨: {numpy_array.itemsize} å­—èŠ‚")  # 4å­—èŠ‚

# æ€§èƒ½å¯¹æ¯”
list_result = [x ** 2 for x in python_list]  # æ…¢
array_result = numpy_array ** 2                # å¿«100å€ï¼
```

**ä¸ºä»€ä¹ˆäººä»¬å®¹æ˜“è¿™æ ·é”™ï¼Ÿ**
- ä¸¤è€…åœ¨**ä½¿ç”¨è¯­æ³•**ä¸Šå¾ˆç›¸ä¼¼ï¼šéƒ½ç”¨ `[]` è®¿é—®å…ƒç´ 
- åˆå­¦æ—¶ç”¨å°æ•°æ®é‡æ„Ÿå—ä¸åˆ°æ€§èƒ½å·®å¼‚
- å¾ˆå¤šæ•™ç¨‹ä¸ºäº†ç®€å•ä¼šæ··ç”¨æœ¯è¯­

**æ­£ç¡®ç†è§£ï¼š**
- Pythonåˆ—è¡¨æ˜¯**é€šç”¨å®¹å™¨**ï¼Œçµæ´»ä½†æ…¢
- NumPyæ•°ç»„æ˜¯**ä¸“ä¸šå·¥å…·**ï¼Œé™åˆ¶å¤šä½†å¿«
- å‘é‡æ•°æ®åº“å¿…é¡»ç”¨NumPyï¼ˆå¤„ç†ç™¾ä¸‡çº§å‘é‡ï¼‰

**åœ¨å‘é‡æ•°æ®åº“ä¸­çš„å½±å“ï¼š**
```python
# âŒ ç”¨åˆ—è¡¨å­˜å‚¨100ä¸‡ä¸ªembeddingï¼ˆæ…¢ä¸”å å†…å­˜ï¼‰
embeddings_list = [[0.1, 0.2, ...] for _ in range(1000000)]

# âœ… ç”¨NumPyæ•°ç»„ï¼ˆå¿«ä¸”èŠ‚çœå†…å­˜ï¼‰
embeddings_array = np.zeros((1000000, 768), dtype=np.float32)
# å†…å­˜èŠ‚çœ70%ï¼Œè®¡ç®—å¿«100å€ï¼
```

---

### è¯¯åŒº2ï¼šç´¢å¼•æ€»æ˜¯åˆ›å»ºå‰¯æœ¬ âŒ

**ä¸ºä»€ä¹ˆé”™ï¼Ÿ**
- NumPyçš„åˆ‡ç‰‡ç´¢å¼•è¿”å›çš„æ˜¯**è§†å›¾ï¼ˆviewï¼‰**ï¼Œä¸æ˜¯å‰¯æœ¬
- ä¿®æ”¹è§†å›¾ä¼š**å½±å“åŸæ•°ç»„**
- å¸ƒå°”ç´¢å¼•å’ŒèŠ±å¼ç´¢å¼•æ‰åˆ›å»ºå‰¯æœ¬

```python
import numpy as np

arr = np.array([1, 2, 3, 4, 5])

# åˆ‡ç‰‡ç´¢å¼• â†’ è§†å›¾
slice_view = arr[1:4]
slice_view[0] = 999
print(arr)  # [1, 999, 3, 4, 5] - åŸæ•°ç»„è¢«ä¿®æ”¹äº†ï¼

# å¸ƒå°”ç´¢å¼• â†’ å‰¯æœ¬
bool_copy = arr[arr > 2]
bool_copy[0] = 888
print(arr)  # [1, 999, 3, 4, 5] - åŸæ•°ç»„æ²¡å˜
```

**ä¸ºä»€ä¹ˆäººä»¬å®¹æ˜“è¿™æ ·é”™ï¼Ÿ**
- Pythonåˆ—è¡¨çš„åˆ‡ç‰‡**æ€»æ˜¯åˆ›å»ºå‰¯æœ¬**ï¼Œå®¹æ˜“å¸¦å…¥è¿™ä¸ªä¹ æƒ¯
- "è§†å›¾"è¿™ä¸ªæ¦‚å¿µåœ¨æ—¥å¸¸ç¼–ç¨‹ä¸­å¾ˆå°‘é‡åˆ°
- å°æ•°æ®é‡æ—¶çœ‹ä¸å‡ºå†…å­˜å˜åŒ–

**æ­£ç¡®ç†è§£ï¼š**
- **åˆ‡ç‰‡ç´¢å¼•** â†’ è§†å›¾ï¼ˆå†…å­˜å…±äº«ï¼Œå¿«ä½†éœ€å°å¿ƒï¼‰
- **å¸ƒå°”/èŠ±å¼ç´¢å¼•** â†’ å‰¯æœ¬ï¼ˆç‹¬ç«‹æ•°æ®ï¼Œæ…¢ä½†å®‰å…¨ï¼‰
- éœ€è¦å‰¯æœ¬æ—¶ç”¨ `.copy()`

**åœ¨å‘é‡æ•°æ®åº“ä¸­çš„å½±å“ï¼š**
```python
# å‘é‡æ•°æ®åº“ä¸­å–å‰1000ä¸ªembedding
embeddings = np.zeros((1000000, 768))

# âŒ è§†å›¾ï¼ˆä¿®æ”¹ä¼šå½±å“åŸæ•°æ®ï¼‰
subset = embeddings[:1000]
subset *= 2  # åŸæ•°ç»„å‰1000ä¸ªä¹Ÿè¢«ä¿®æ”¹ï¼

# âœ… å‰¯æœ¬ï¼ˆå®‰å…¨ï¼‰
subset = embeddings[:1000].copy()
subset *= 2  # åŸæ•°ç»„ä¸å—å½±å“
```

---

### è¯¯åŒº3ï¼šå¯ä»¥éšæ„æ”¹å˜æ•°ç»„å¤§å° âŒ

**ä¸ºä»€ä¹ˆé”™ï¼Ÿ**
- NumPyæ•°ç»„çš„**å½¢çŠ¶æ˜¯å›ºå®šçš„**ï¼ˆåˆ›å»ºæ—¶ç¡®å®šï¼‰
- ä¸èƒ½åƒPythonåˆ—è¡¨é‚£æ · `append()` æˆ– `remove()`
- æ”¹å˜å½¢çŠ¶å®é™…ä¸Šæ˜¯**åˆ›å»ºæ–°æ•°ç»„**ï¼ˆ`reshape` æ˜¯è§†å›¾ä¾‹å¤–ï¼‰

```python
import numpy as np

# Pythonåˆ—è¡¨ï¼ˆå¯å˜å¤§å°ï¼‰
python_list = [1, 2, 3]
python_list.append(4)  # âœ… å¯ä»¥è¿½åŠ 
print(python_list)  # [1, 2, 3, 4]

# NumPyæ•°ç»„ï¼ˆå›ºå®šå¤§å°ï¼‰
numpy_array = np.array([1, 2, 3])
# numpy_array.append(4)  # âŒ æ²¡æœ‰è¿™ä¸ªæ–¹æ³•ï¼

# å¦‚æœçœŸè¦æ·»åŠ å…ƒç´ ï¼Œå¿…é¡»åˆ›å»ºæ–°æ•°ç»„
new_array = np.append(numpy_array, 4)  # å®é™…åˆ›å»ºäº†æ–°æ•°ç»„
print(new_array)  # [1 2 3 4]
```

**ä¸ºä»€ä¹ˆäººä»¬å®¹æ˜“è¿™æ ·é”™ï¼Ÿ**
- Pythonåˆ—è¡¨å¯ä»¥åŠ¨æ€å¢é•¿ï¼Œä¹ æƒ¯äº†è¿™ç§çµæ´»æ€§
- `np.append()` çš„åå­—è¯¯å¯¼æ€§å¼ºï¼ˆå®é™…æ˜¯åˆ›å»ºæ–°æ•°ç»„ï¼‰
- å°æ•°ç»„æ—¶æ€§èƒ½æŸå¤±ä¸æ˜æ˜¾

**æ­£ç¡®ç†è§£ï¼š**
- NumPyæ•°ç»„ = **å›ºå®šå¤§å°çš„å†…å­˜å—**ï¼ˆé«˜æ•ˆï¼‰
- Pythonåˆ—è¡¨ = **åŠ¨æ€æ•°ç»„**ï¼ˆçµæ´»ä½†æ…¢ï¼‰
- éœ€è¦é¢‘ç¹å¢åˆ  â†’ å…ˆç”¨åˆ—è¡¨æ”¶é›†ï¼Œæœ€åè½¬NumPy

**åœ¨å‘é‡æ•°æ®åº“ä¸­çš„å½±å“ï¼š**
```python
# âŒ é€ä¸ªæ·»åŠ embeddingï¼ˆæ¯æ¬¡åˆ›å»ºæ–°æ•°ç»„ï¼Œéå¸¸æ…¢ï¼ï¼‰
embeddings = np.array([])
for doc in documents:
    embedding = model.encode(doc)
    embeddings = np.append(embeddings, embedding)  # æ¯æ¬¡é‡æ–°åˆ†é…å†…å­˜

# âœ… é¢„åˆ†é…ç©ºé—´ï¼ˆå¿«100å€ï¼‰
embeddings = np.zeros((len(documents), 768), dtype=np.float32)
for i, doc in enumerate(documents):
    embeddings[i] = model.encode(doc)  # ç›´æ¥å†™å…¥ï¼Œä¸é‡æ–°åˆ†é…

# âœ…âœ… æœ€ä¼˜ï¼šå…ˆç”¨åˆ—è¡¨æ”¶é›†ï¼Œæœ€åè½¬NumPy
embedding_list = []
for doc in documents:
    embedding_list.append(model.encode(doc))
embeddings = np.array(embedding_list)  # ä¸€æ¬¡æ€§è½¬æ¢
```

---

## 7. ã€å®æˆ˜ä»£ç ã€‘ä¸€ä¸ªèƒ½è·‘çš„ä¾‹å­

```python
import numpy as np

# ===== 1. åˆ›å»ºå‘é‡çš„å¤šç§æ–¹å¼ =====
print("=== 1. åˆ›å»ºå‘é‡ ===\n")

# ä»åˆ—è¡¨åˆ›å»º
vector = np.array([1.5, 2.7, 3.2, 4.8])
print(f"ä»åˆ—è¡¨åˆ›å»º: {vector}")
print(f"æ•°æ®ç±»å‹: {vector.dtype}")  # float64ï¼ˆé»˜è®¤ï¼‰

# æŒ‡å®šæ•°æ®ç±»å‹ï¼ˆèŠ‚çœå†…å­˜ï¼‰
vector_float32 = np.array([1.5, 2.7, 3.2], dtype=np.float32)
print(f"\n32ä½æµ®ç‚¹: {vector_float32}")
print(f"æ¯ä¸ªå…ƒç´ å ç”¨: {vector_float32.itemsize} å­—èŠ‚")  # 4å­—èŠ‚

# é¢„åˆ†é…ç©ºé—´ï¼ˆå‘é‡æ•°æ®åº“å¸¸ç”¨ï¼‰
embeddings_batch = np.zeros((5, 4), dtype=np.float32)
print(f"\né¢„åˆ†é…5ä¸ª4ç»´å‘é‡:\n{embeddings_batch}")
print(f"å½¢çŠ¶: {embeddings_batch.shape}")  # (5, 4)

# éšæœºå‘é‡ï¼ˆæµ‹è¯•ç”¨ï¼‰
random_vector = np.random.rand(4)
print(f"\néšæœºå‘é‡: {random_vector}")

# ===== 2. åŸºæœ¬ç´¢å¼•æ“ä½œ =====
print("\n=== 2. åŸºæœ¬ç´¢å¼• ===\n")

arr = np.array([10, 20, 30, 40, 50, 60, 70, 80, 90, 100])
print(f"åŸæ•°ç»„: {arr}")

# å•å…ƒç´ ç´¢å¼•
print(f"ç¬¬1ä¸ªå…ƒç´ : {arr[0]}")
print(f"ç¬¬5ä¸ªå…ƒç´ : {arr[4]}")
print(f"æœ€åä¸€ä¸ª: {arr[-1]}")

# åˆ‡ç‰‡ç´¢å¼•
print(f"\nå‰3ä¸ª: {arr[:3]}")
print(f"ç´¢å¼•2åˆ°5: {arr[2:6]}")
print(f"æ¯éš”ä¸€ä¸ª: {arr[::2]}")
print(f"åè½¬: {arr[::-1]}")

# ===== 3. é«˜çº§ç´¢å¼• =====
print("\n=== 3. é«˜çº§ç´¢å¼• ===\n")

scores = np.array([0.95, 0.23, 0.87, 0.45, 0.91, 0.12])
print(f"ç›¸ä¼¼åº¦åˆ†æ•°: {scores}")

# å¸ƒå°”ç´¢å¼•ï¼ˆæ¡ä»¶è¿‡æ»¤ï¼‰
threshold = 0.8
high_scores = scores[scores > threshold]
print(f"\nç›¸ä¼¼åº¦>{threshold}çš„åˆ†æ•°: {high_scores}")

# è·å–é«˜åˆ†æ•°çš„ç´¢å¼•
high_score_indices = np.where(scores > threshold)[0]
print(f"é«˜åˆ†æ•°çš„ç´¢å¼•ä½ç½®: {high_score_indices}")

# èŠ±å¼ç´¢å¼•ï¼ˆç´¢å¼•æ•°ç»„ï¼‰
selected_indices = [0, 2, 4]
selected_scores = scores[selected_indices]
print(f"\né€‰ä¸­ç´¢å¼•{selected_indices}çš„åˆ†æ•°: {selected_scores}")

# ===== 4. å½¢çŠ¶æ“ä½œ =====
print("\n=== 4. å½¢çŠ¶æ“ä½œ ===\n")

# åˆ›å»ºä¸€ç»´æ•°ç»„
arr_1d = np.arange(12)
print(f"ä¸€ç»´æ•°ç»„: {arr_1d}")
print(f"å½¢çŠ¶: {arr_1d.shape}")  # (12,)

# reshapeåˆ°äºŒç»´
arr_2d = arr_1d.reshape(3, 4)
print(f"\nreshapeåˆ°(3,4):\n{arr_2d}")

# reshapeåˆ°ä¸‰ç»´
arr_3d = arr_1d.reshape(2, 3, 2)
print(f"\nreshapeåˆ°(2,3,2):\n{arr_3d}")

# å±•å¹³å›ä¸€ç»´
arr_flat = arr_3d.flatten()
print(f"\nå±•å¹³: {arr_flat}")

# ===== 5. å‘é‡æ•°æ®åº“åº”ç”¨ç¤ºä¾‹ï¼šRAGç³»ç»Ÿ =====
print("\n=== 5. å‘é‡æ•°æ®åº“åº”ç”¨ï¼šRAGæ£€ç´¢ ===\n")

# æ¨¡æ‹Ÿåœºæ™¯ï¼šæˆ‘ä»¬æœ‰5ä¸ªæ–‡æ¡£ï¼Œæ¯ä¸ªæ–‡æ¡£æœ‰4ç»´embedding
documents = [
    "Pythonæ˜¯ä¸€é—¨ç¼–ç¨‹è¯­è¨€",
    "NumPyç”¨äºæ•°å€¼è®¡ç®—",
    "å‘é‡æ•°æ®åº“å­˜å‚¨embedding",
    "è‹¹æœæ˜¯ä¸€ç§æ°´æœ",
    "é¦™è•‰å¯Œå«é’¾å…ƒç´ "
]

# æ¨¡æ‹Ÿembeddingï¼ˆå®é™…ä¸­ç”±BERT/OpenAIç­‰æ¨¡å‹ç”Ÿæˆï¼‰
doc_embeddings = np.array([
    [0.9, 0.1, 0.8, 0.2],  # Pythonç¼–ç¨‹
    [0.8, 0.2, 0.9, 0.1],  # NumPyè®¡ç®—
    [0.7, 0.3, 0.85, 0.15], # å‘é‡æ•°æ®åº“
    [0.1, 0.9, 0.2, 0.8],  # è‹¹æœæ°´æœ
    [0.2, 0.8, 0.1, 0.9]   # é¦™è•‰æ°´æœ
], dtype=np.float32)

print(f"æ–‡æ¡£æ•°é‡: {len(documents)}")
print(f"EmbeddingçŸ©é˜µå½¢çŠ¶: {doc_embeddings.shape}")  # (5, 4)

# ç”¨æˆ·æŸ¥è¯¢
query = "æœºå™¨å­¦ä¹ å’Œç¼–ç¨‹"
query_embedding = np.array([0.85, 0.15, 0.75, 0.25], dtype=np.float32)

print(f"\næŸ¥è¯¢: '{query}'")
print(f"æŸ¥è¯¢embedding: {query_embedding}")

# ç®€å•çš„ç›¸ä¼¼åº¦è®¡ç®—ï¼ˆç‚¹ç§¯ï¼Œåç»­è¯¾ç¨‹è¯¦ç»†è®²è§£ï¼‰
similarities = doc_embeddings @ query_embedding
print(f"\nä¸å„æ–‡æ¡£çš„ç›¸ä¼¼åº¦: {similarities}")

# è·å–Top-3æœ€ç›¸ä¼¼çš„æ–‡æ¡£
top_k = 3
top_k_indices = np.argsort(similarities)[::-1][:top_k]  # é™åºæ’åºå–å‰3
print(f"\nTop-{top_k}æœ€ç›¸ä¼¼æ–‡æ¡£çš„ç´¢å¼•: {top_k_indices}")
print(f"Top-{top_k}ç›¸ä¼¼åº¦åˆ†æ•°: {similarities[top_k_indices]}")

print(f"\næ£€ç´¢ç»“æœ:")
for i, idx in enumerate(top_k_indices):
    print(f"{i+1}. [{similarities[idx]:.3f}] {documents[idx]}")

# ===== 6. å‘é‡æ•°æ®åº“åº”ç”¨ç¤ºä¾‹ï¼šæ¨èç³»ç»Ÿ =====
print("\n=== 6. å‘é‡æ•°æ®åº“åº”ç”¨ï¼šæ¨èç³»ç»Ÿ ===\n")

# æ¨¡æ‹Ÿåœºæ™¯ï¼šç”¨æˆ·å†å²è¡Œä¸ºembedding + å•†å“embedding
user_history = np.array([
    [0.8, 0.2, 0.7],  # ç”¨æˆ·çœ‹è¿‡ç§‘æŠ€ç±»å•†å“
    [0.7, 0.3, 0.6],  # ç”¨æˆ·çœ‹è¿‡æ•°ç ç±»å•†å“
], dtype=np.float32)

# è®¡ç®—ç”¨æˆ·å…´è¶£å‘é‡ï¼ˆå¹³å‡ï¼‰
user_profile = user_history.mean(axis=0)
print(f"ç”¨æˆ·å…´è¶£ç”»åƒ: {user_profile}")

# å€™é€‰å•†å“embedding
candidate_items = np.array([
    [0.75, 0.25, 0.65],  # ç§‘æŠ€å•†å“A
    [0.2, 0.8, 0.3],     # ç¾å¦†å•†å“B
    [0.8, 0.1, 0.7],     # æ•°ç å•†å“C
    [0.3, 0.7, 0.4],     # æœè£…å•†å“D
], dtype=np.float32)

item_names = ["ç§‘æŠ€å•†å“A", "ç¾å¦†å•†å“B", "æ•°ç å•†å“C", "æœè£…å•†å“D"]

# è®¡ç®—åŒ¹é…åº¦
match_scores = candidate_items @ user_profile
print(f"\nå•†å“åŒ¹é…åˆ†æ•°: {match_scores}")

# æ¨èTop-2
top_recommendations = np.argsort(match_scores)[::-1][:2]
print(f"\næ¨èç»™ç”¨æˆ·çš„å•†å“:")
for idx in top_recommendations:
    print(f"  - {item_names[idx]} (åˆ†æ•°: {match_scores[idx]:.3f})")

# ===== 7. æ€§èƒ½å¯¹æ¯”ï¼šåˆ—è¡¨ vs NumPy =====
print("\n=== 7. æ€§èƒ½å¯¹æ¯” ===\n")

import time

# åˆ›å»ºå¤§å‹æ•°æ®
size = 100000
data_list = list(range(size))
data_array = np.arange(size)

# æµ‹è¯•åˆ—è¡¨
start = time.time()
result_list = [x ** 2 for x in data_list]
time_list = time.time() - start

# æµ‹è¯•NumPy
start = time.time()
result_array = data_array ** 2
time_array = time.time() - start

print(f"å¤„ç†{size}ä¸ªå…ƒç´ :")
print(f"Pythonåˆ—è¡¨: {time_list:.4f}ç§’")
print(f"NumPyæ•°ç»„: {time_array:.4f}ç§’")
print(f"NumPyå¿«{time_list/time_array:.1f}å€!")

# ===== 8. å†…å­˜æ•ˆç‡å¯¹æ¯” =====
print("\n=== 8. å†…å­˜æ•ˆç‡ ===\n")

import sys

# Pythonåˆ—è¡¨
list_data = [1.0] * 1000
list_size = sys.getsizeof(list_data) + sum(sys.getsizeof(x) for x in list_data)

# NumPyæ•°ç»„
array_data = np.ones(1000, dtype=np.float32)
array_size = array_data.nbytes

print(f"å­˜å‚¨1000ä¸ªæµ®ç‚¹æ•°:")
print(f"Pythonåˆ—è¡¨: {list_size} å­—èŠ‚")
print(f"NumPyæ•°ç»„: {array_size} å­—èŠ‚")
print(f"NumPyèŠ‚çœ{(1 - array_size/list_size)*100:.1f}%å†…å­˜!")
```

**è¿è¡Œè¾“å‡ºç¤ºä¾‹ï¼š**

```
=== 1. åˆ›å»ºå‘é‡ ===

ä»åˆ—è¡¨åˆ›å»º: [1.5 2.7 3.2 4.8]
æ•°æ®ç±»å‹: float64

32ä½æµ®ç‚¹: [1.5 2.7 3.2]
æ¯ä¸ªå…ƒç´ å ç”¨: 4 å­—èŠ‚

é¢„åˆ†é…5ä¸ª4ç»´å‘é‡:
[[0. 0. 0. 0.]
 [0. 0. 0. 0.]
 [0. 0. 0. 0.]
 [0. 0. 0. 0.]
 [0. 0. 0. 0.]]
å½¢çŠ¶: (5, 4)

éšæœºå‘é‡: [0.234 0.891 0.456 0.123]

=== 2. åŸºæœ¬ç´¢å¼• ===

åŸæ•°ç»„: [ 10  20  30  40  50  60  70  80  90 100]
ç¬¬1ä¸ªå…ƒç´ : 10
ç¬¬5ä¸ªå…ƒç´ : 50
æœ€åä¸€ä¸ª: 100

å‰3ä¸ª: [10 20 30]
ç´¢å¼•2åˆ°5: [30 40 50 60]
æ¯éš”ä¸€ä¸ª: [10 30 50 70 90]
åè½¬: [100  90  80  70  60  50  40  30  20  10]

=== 3. é«˜çº§ç´¢å¼• ===

ç›¸ä¼¼åº¦åˆ†æ•°: [0.95 0.23 0.87 0.45 0.91 0.12]

ç›¸ä¼¼åº¦>0.8çš„åˆ†æ•°: [0.95 0.87 0.91]
é«˜åˆ†æ•°çš„ç´¢å¼•ä½ç½®: [0 2 4]

é€‰ä¸­ç´¢å¼•[0, 2, 4]çš„åˆ†æ•°: [0.95 0.87 0.91]

=== 4. å½¢çŠ¶æ“ä½œ ===

ä¸€ç»´æ•°ç»„: [ 0  1  2  3  4  5  6  7  8  9 10 11]
å½¢çŠ¶: (12,)

reshapeåˆ°(3,4):
[[ 0  1  2  3]
 [ 4  5  6  7]
 [ 8  9 10 11]]

reshapeåˆ°(2,3,2):
[[[ 0  1]
  [ 2  3]
  [ 4  5]]

 [[ 6  7]
  [ 8  9]
  [10 11]]]

å±•å¹³: [ 0  1  2  3  4  5  6  7  8  9 10 11]

=== 5. å‘é‡æ•°æ®åº“åº”ç”¨ï¼šRAGæ£€ç´¢ ===

æ–‡æ¡£æ•°é‡: 5
EmbeddingçŸ©é˜µå½¢çŠ¶: (5, 4)

æŸ¥è¯¢: 'æœºå™¨å­¦ä¹ å’Œç¼–ç¨‹'
æŸ¥è¯¢embedding: [0.85 0.15 0.75 0.25]

ä¸å„æ–‡æ¡£çš„ç›¸ä¼¼åº¦: [1.545 1.555 1.4625 0.6375 0.6625]

Top-3æœ€ç›¸ä¼¼æ–‡æ¡£çš„ç´¢å¼•: [1 0 2]
Top-3ç›¸ä¼¼åº¦åˆ†æ•°: [1.555 1.545 1.4625]

æ£€ç´¢ç»“æœ:
1. [1.555] NumPyç”¨äºæ•°å€¼è®¡ç®—
2. [1.545] Pythonæ˜¯ä¸€é—¨ç¼–ç¨‹è¯­è¨€
3. [1.463] å‘é‡æ•°æ®åº“å­˜å‚¨embedding

=== 6. å‘é‡æ•°æ®åº“åº”ç”¨ï¼šæ¨èç³»ç»Ÿ ===

ç”¨æˆ·å…´è¶£ç”»åƒ: [0.75 0.25 0.65]

å•†å“åŒ¹é…åˆ†æ•°: [1.225 0.795 1.255 0.885]

æ¨èç»™ç”¨æˆ·çš„å•†å“:
  - æ•°ç å•†å“C (åˆ†æ•°: 1.255)
  - ç§‘æŠ€å•†å“A (åˆ†æ•°: 1.225)

=== 7. æ€§èƒ½å¯¹æ¯” ===

å¤„ç†100000ä¸ªå…ƒç´ :
Pythonåˆ—è¡¨: 0.0234ç§’
NumPyæ•°ç»„: 0.0002ç§’
NumPyå¿«117.0å€!

=== 8. å†…å­˜æ•ˆç‡ ===

å­˜å‚¨1000ä¸ªæµ®ç‚¹æ•°:
Pythonåˆ—è¡¨: 28160 å­—èŠ‚
NumPyæ•°ç»„: 4000 å­—èŠ‚
NumPyèŠ‚çœ85.8%å†…å­˜!
```

---

## 8. ã€é¢è¯•å¿…é—®ã€‘å¦‚æœè¢«é—®åˆ°ï¼Œæ€ä¹ˆç­”å‡ºå½©

### é—®é¢˜1ï¼š"NumPyæ•°ç»„å’ŒPythonåˆ—è¡¨æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"

**æ™®é€šå›ç­”ï¼ˆâŒ ä¸å‡ºå½©ï¼‰ï¼š**
"NumPyæ•°ç»„æ¯”åˆ—è¡¨å¿«ï¼Œè€Œä¸”åªèƒ½å­˜ç›¸åŒç±»å‹çš„æ•°æ®ã€‚"

**å‡ºå½©å›ç­”ï¼ˆâœ… æ¨èï¼‰ï¼š**

> **NumPyæ•°ç»„å’ŒPythonåˆ—è¡¨çš„åŒºåˆ«å¯ä»¥ä»ä¸‰ä¸ªå±‚é¢ç†è§£ï¼š**
>
> 1. **å†…å­˜å±‚é¢**ï¼š
>    - Pythonåˆ—è¡¨æ˜¯**æŒ‡é’ˆæ•°ç»„**ï¼Œæ¯ä¸ªå…ƒç´ å­˜å‚¨çš„æ˜¯æŒ‡å‘å¯¹è±¡çš„æŒ‡é’ˆï¼Œå…ƒç´ å¯ä»¥åˆ†æ•£åœ¨å†…å­˜å„å¤„
>    - NumPyæ•°ç»„æ˜¯**è¿ç»­å†…å­˜å—**ï¼Œæ‰€æœ‰æ•°æ®ç´§å¯†æ’åˆ—ï¼Œç±»å‹å›ºå®šï¼ˆå¦‚å…¨æ˜¯float32ï¼‰
>    - ç»“æœï¼šNumPyæ•°ç»„å†…å­˜å ç”¨å°‘60-90%ï¼Œè®¿é—®é€Ÿåº¦å¿«ï¼ˆç¼“å­˜å‹å¥½ï¼‰
>
> 2. **æ€§èƒ½å±‚é¢**ï¼š
>    - Pythonåˆ—è¡¨æ“ä½œé€šè¿‡Pythonè§£é‡Šå™¨æ‰§è¡Œï¼ˆæ…¢ï¼‰
>    - NumPyæ•°ç»„æ“ä½œåœ¨Cè¯­è¨€å±‚é¢æ‰§è¡Œï¼Œæ”¯æŒSIMDå‘é‡åŒ–æŒ‡ä»¤ï¼ˆå¿«100-1000å€ï¼‰
>    - ä¸¾ä¾‹ï¼šå¯¹100ä¸‡ä¸ªæ•°æ±‚å¹³æ–¹ï¼Œåˆ—è¡¨éœ€è¦2ç§’ï¼ŒNumPyåªéœ€0.002ç§’
>
> 3. **åŠŸèƒ½å±‚é¢**ï¼š
>    - åˆ—è¡¨æ˜¯é€šç”¨å®¹å™¨ï¼ˆå¯ä»¥æ··åˆç±»å‹ï¼ŒåŠ¨æ€å¢åˆ ï¼‰
>    - NumPyæ•°ç»„æ˜¯æ•°å€¼è®¡ç®—å·¥å…·ï¼ˆæ”¯æŒçŸ©é˜µè¿ç®—ã€å¹¿æ’­ã€ç´¢å¼•åˆ‡ç‰‡ç­‰ï¼‰
>
> **åœ¨å‘é‡æ•°æ®åº“ä¸­çš„åº”ç”¨**ï¼š
> å‘é‡æ•°æ®åº“éœ€è¦å­˜å‚¨å’Œæ£€ç´¢ç™¾ä¸‡çº§embeddingå‘é‡ï¼Œå¿…é¡»ç”¨NumPyæ•°ç»„ï¼š
> - ä¸€ä¸ª100ä¸‡Ã—768ç»´çš„embeddingçŸ©é˜µï¼ŒNumPyåªéœ€3GBå†…å­˜ï¼Œåˆ—è¡¨éœ€è¦30GB
> - è®¡ç®—æŸ¥è¯¢å‘é‡ä¸100ä¸‡ä¸ªæ–‡æ¡£å‘é‡çš„ç›¸ä¼¼åº¦ï¼ŒNumPyåªéœ€0.1ç§’ï¼Œåˆ—è¡¨éœ€è¦å‡ åˆ†é’Ÿ

**ä¸ºä»€ä¹ˆè¿™ä¸ªå›ç­”å‡ºå½©ï¼Ÿ**
1. âœ… ä»ä¸‰ä¸ªå±‚é¢é˜è¿°ï¼ˆå†…å­˜ã€æ€§èƒ½ã€åŠŸèƒ½ï¼‰
2. âœ… ç»™å‡ºäº†å…·ä½“çš„æ•°å­—å’Œä¾‹å­
3. âœ… è¯´æ˜äº†åº•å±‚åŸç†ï¼ˆè¿ç»­å†…å­˜ã€Cè¯­è¨€ã€SIMDï¼‰
4. âœ… è¿æ¥åˆ°å‘é‡æ•°æ®åº“å®é™…åº”ç”¨
5. âœ… å±•ç¤ºäº†å¯¹å¤§è§„æ¨¡æ•°æ®å¤„ç†çš„ç†è§£

---

### é—®é¢˜2ï¼š"NumPyä¸­åˆ‡ç‰‡å’Œå¸ƒå°”ç´¢å¼•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"

**æ™®é€šå›ç­”ï¼ˆâŒ ä¸å‡ºå½©ï¼‰ï¼š**
"åˆ‡ç‰‡ç”¨èŒƒå›´é€‰å…ƒç´ ï¼Œå¸ƒå°”ç´¢å¼•ç”¨æ¡ä»¶é€‰å…ƒç´ ã€‚"

**å‡ºå½©å›ç­”ï¼ˆâœ… æ¨èï¼‰ï¼š**

> **åˆ‡ç‰‡å’Œå¸ƒå°”ç´¢å¼•çš„æœ¬è´¨åŒºåˆ«æ˜¯è¿”å›çš„æ˜¯è§†å›¾è¿˜æ˜¯å‰¯æœ¬ï¼š**
>
> 1. **åˆ‡ç‰‡ç´¢å¼•è¿”å›è§†å›¾**ï¼š
>    ```python
>    arr = np.array([1, 2, 3, 4, 5])
>    view = arr[1:4]  # è§†å›¾
>    view[0] = 999
>    # arrå˜æˆäº†[1, 999, 3, 4, 5] - åŸæ•°ç»„è¢«ä¿®æ”¹ï¼
>    ```
>    - å†…å­˜å…±äº«ï¼šè§†å›¾å’ŒåŸæ•°ç»„æŒ‡å‘åŒä¸€å—å†…å­˜
>    - ä¼˜ç‚¹ï¼šèŠ‚çœå†…å­˜ï¼Œé€Ÿåº¦å¿«
>    - é£é™©ï¼šä¿®æ”¹è§†å›¾ä¼šå½±å“åŸæ•°ç»„
>
> 2. **å¸ƒå°”ç´¢å¼•è¿”å›å‰¯æœ¬**ï¼š
>    ```python
>    arr = np.array([1, 2, 3, 4, 5])
>    copy = arr[arr > 2]  # å‰¯æœ¬
>    copy[0] = 999
>    # arrè¿˜æ˜¯[1, 2, 3, 4, 5] - åŸæ•°ç»„ä¸å˜
>    ```
>    - ç‹¬ç«‹å†…å­˜ï¼šå‰¯æœ¬æœ‰è‡ªå·±çš„å†…å­˜ç©ºé—´
>    - ä¼˜ç‚¹ï¼šå®‰å…¨ï¼Œäº’ä¸å½±å“
>    - ç¼ºç‚¹ï¼šæ¶ˆè€—å†…å­˜ï¼Œé€Ÿåº¦ç¨æ…¢
>
> **ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ**
> - åˆ‡ç‰‡æ˜¯è§„åˆ™çš„è¿ç»­é€‰æ‹©ï¼Œå¯ä»¥ç”¨æŒ‡é’ˆåç§»å®ç°è§†å›¾ï¼ˆé«˜æ•ˆï¼‰
> - å¸ƒå°”ç´¢å¼•æ˜¯ä¸è§„åˆ™é€‰æ‹©ï¼ˆå¦‚[1,3,7,9]ï¼‰ï¼Œæ— æ³•ç”¨æŒ‡é’ˆè¡¨ç¤ºï¼Œå¿…é¡»å¤åˆ¶æ•°æ®
>
> **åœ¨å‘é‡æ•°æ®åº“ä¸­çš„åº”ç”¨**ï¼š
> - **åˆ‡ç‰‡å–Top-K**ï¼š`top_10 = embeddings[indices[:10]]` â†’ è§†å›¾ï¼Œé«˜æ•ˆ
> - **é˜ˆå€¼è¿‡æ»¤**ï¼š`high_conf = embeddings[scores > 0.8]` â†’ å‰¯æœ¬ï¼Œä½†å¿…è¦
> - **éœ€è¦å‰¯æœ¬æ—¶**ï¼š`safe_copy = embeddings[:1000].copy()` â†’ æ˜¾å¼å¤åˆ¶

**ä¸ºä»€ä¹ˆè¿™ä¸ªå›ç­”å‡ºå½©ï¼Ÿ**
1. âœ… æŒ‡å‡ºäº†æ ¸å¿ƒåŒºåˆ«ï¼ˆè§†å›¾vså‰¯æœ¬ï¼‰
2. âœ… ç”¨ä»£ç å±•ç¤ºäº†å®é™…è¡Œä¸ºå·®å¼‚
3. âœ… è§£é‡Šäº†ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼ˆåº•å±‚åŸç†ï¼‰
4. âœ… ç»™å‡ºäº†å‘é‡æ•°æ®åº“ä¸­çš„å®é™…åº”ç”¨åœºæ™¯
5. âœ… å±•ç¤ºäº†å¯¹å†…å­˜ç®¡ç†çš„æ·±åº¦ç†è§£

---

## 9. ã€åŒ–éª¨ç»µæŒã€‘10ä¸ª2åˆ†é’ŸçŸ¥è¯†å¡ç‰‡

### å¡ç‰‡1ï¼šNumPyæ•°ç»„çš„æœ¬è´¨ ğŸ¯

**ä¸€å¥è¯ï¼š** NumPyæ•°ç»„æ˜¯è¿ç»­å†…å­˜å—ä¸Šçš„åŒç±»å‹æ•°æ®é›†åˆï¼Œé…å¤‡å¼ºå¤§çš„ç´¢å¼•å’Œè¿ç®—åŠŸèƒ½

**ä¸¾ä¾‹ï¼š**
```python
# Pythonåˆ—è¡¨ï¼šåˆ†æ•£å­˜å‚¨ï¼ŒæŒ‡é’ˆæ•°ç»„
[1, 2, 3]  â†’ [æŒ‡é’ˆâ†’1å¯¹è±¡] [æŒ‡é’ˆâ†’2å¯¹è±¡] [æŒ‡é’ˆâ†’3å¯¹è±¡]

# NumPyæ•°ç»„ï¼šè¿ç»­å­˜å‚¨ï¼Œç´§å‡‘æ’åˆ—
[1, 2, 3]  â†’ [00 00 00 01 00 00 00 02 00 00 00 03]  # è¿ç»­çš„å†…å­˜
```

**åº”ç”¨ï¼š** å‘é‡æ•°æ®åº“å¿…é¡»ç”¨NumPyå­˜å‚¨embeddingï¼Œå› ä¸ºï¼š
- ç™¾ä¸‡çº§å‘é‡éœ€è¦ç´§å‡‘å­˜å‚¨ï¼ˆèŠ‚çœå†…å­˜ï¼‰
- ç›¸ä¼¼åº¦è®¡ç®—éœ€è¦å‘é‡åŒ–è¿ç®—ï¼ˆå¿«100å€ï¼‰

---

### å¡ç‰‡2ï¼šæ•°ç»„çš„å½¢çŠ¶ï¼ˆshapeï¼‰ğŸ“

**ä¸€å¥è¯ï¼š** shapeæ˜¯æ•°ç»„å„ç»´åº¦çš„å¤§å°ï¼Œå†³å®šäº†æ•°æ®çš„ç»„ç»‡ç»“æ„

```python
import numpy as np

# ä¸€ç»´æ•°ç»„ï¼ˆå‘é‡ï¼‰
v = np.array([1, 2, 3])
print(v.shape)  # (3,) - 3ä¸ªå…ƒç´ 

# äºŒç»´æ•°ç»„ï¼ˆçŸ©é˜µï¼‰
m = np.array([[1, 2], [3, 4], [5, 6]])
print(m.shape)  # (3, 2) - 3è¡Œ2åˆ—

# ä¸‰ç»´æ•°ç»„
t = np.ones((2, 3, 4))
print(t.shape)  # (2, 3, 4) - 2ä¸ª3Ã—4çš„çŸ©é˜µ
```

**åº”ç”¨ï¼š** å‘é‡æ•°æ®åº“ä¸­çš„embeddingçŸ©é˜µï¼š
- å•ä¸ªembeddingï¼š`(768,)` - 768ç»´å‘é‡
- æ‰¹é‡embeddingï¼š`(1000, 768)` - 1000ä¸ª768ç»´å‘é‡

---

### å¡ç‰‡3ï¼šæ•°æ®ç±»å‹ï¼ˆdtypeï¼‰ğŸ”¢

**ä¸€å¥è¯ï¼š** dtypeæŒ‡å®šæ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ çš„æ•°æ®ç±»å‹ï¼Œå½±å“ç²¾åº¦å’Œå†…å­˜

**å¸¸ç”¨ç±»å‹ï¼š**
```python
import numpy as np

# æ•´æ•°ç±»å‹
arr_int32 = np.array([1, 2, 3], dtype=np.int32)    # 4å­—èŠ‚æ•´æ•°
arr_int64 = np.array([1, 2, 3], dtype=np.int64)    # 8å­—èŠ‚æ•´æ•°

# æµ®ç‚¹ç±»å‹ï¼ˆembeddingå¸¸ç”¨ï¼‰
arr_float32 = np.array([1.0, 2.0], dtype=np.float32)  # 4å­—èŠ‚æµ®ç‚¹
arr_float64 = np.array([1.0, 2.0], dtype=np.float64)  # 8å­—èŠ‚æµ®ç‚¹ï¼ˆé»˜è®¤ï¼‰

# æŸ¥çœ‹å’Œè½¬æ¢
print(arr_int32.dtype)  # int32
arr_float = arr_int32.astype(np.float32)  # è½¬æ¢ç±»å‹
```

**åº”ç”¨ï¼š** å‘é‡æ•°æ®åº“ä¼˜åŒ–ï¼š
- ä½¿ç”¨ `float32` è€Œé `float64` å¯èŠ‚çœ50%å†…å­˜
- 100ä¸‡Ã—768ç»´çš„embeddingï¼š
  - float64: 6GB
  - float32: 3GB

---

### å¡ç‰‡4ï¼šåˆ›å»ºæ•°ç»„çš„å¥—è·¯ ğŸ› ï¸

**ä¸€å¥è¯ï¼š** æ ¹æ®åœºæ™¯é€‰æ‹©åˆé€‚çš„åˆ›å»ºæ–¹æ³•

| åœºæ™¯ | æ–¹æ³• | ä»£ç  |
|------|------|------|
| ä»å·²æœ‰æ•°æ® | `array()` | `np.array([1,2,3])` |
| é¢„åˆ†é…ç©ºé—´ | `zeros()`/`ones()` | `np.zeros((1000, 768))` |
| éšæœºæµ‹è¯•æ•°æ® | `random.rand()` | `np.random.rand(5)` |
| ç­‰å·®åºåˆ— | `arange()`/`linspace()` | `np.arange(0, 10, 2)` |
| å•ä½çŸ©é˜µ | `eye()` | `np.eye(3)` |
| ä»æ–‡ä»¶ | `load()`/`loadtxt()` | `np.load('data.npy')` |

**è®°å¿†æŠ€å·§ï¼š**
- æœ‰æ•°æ® â†’ `array()`
- è¦å ä½ â†’ `zeros()`/`ones()`
- è¦éšæœº â†’ `random.*()`

---

### å¡ç‰‡5ï¼šç´¢å¼•åŸºç¡€ - å•ä¸ªå…ƒç´  ğŸ¯

**ä¸€å¥è¯ï¼š** ç”¨æ•´æ•°ç´¢å¼•è®¿é—®å•ä¸ªå…ƒç´ ï¼Œæ”¯æŒè´Ÿæ•°ç´¢å¼•

```python
arr = np.array([10, 20, 30, 40, 50])

# æ­£å‘ç´¢å¼•ï¼ˆä»0å¼€å§‹ï¼‰
arr[0]   # 10 - ç¬¬1ä¸ª
arr[2]   # 30 - ç¬¬3ä¸ª

# è´Ÿå‘ç´¢å¼•ï¼ˆä»-1å¼€å§‹ï¼‰
arr[-1]  # 50 - æœ€å1ä¸ª
arr[-2]  # 40 - å€’æ•°ç¬¬2ä¸ª
```

**å¯è§†åŒ–ï¼š**
```
ç´¢å¼•:   0   1   2   3   4
æ•°ç»„:  10  20  30  40  50
è´Ÿç´¢å¼•: -5  -4  -3  -2  -1
```

**åº”ç”¨ï¼š** è·å–ç‰¹å®šä½ç½®çš„embedding
```python
first_doc = embeddings[0]      # ç¬¬ä¸€ä¸ªæ–‡æ¡£
last_doc = embeddings[-1]      # æœ€åä¸€ä¸ªæ–‡æ¡£
```

---

### å¡ç‰‡6ï¼šåˆ‡ç‰‡ - æ‰¹é‡é€‰æ‹© âœ‚ï¸

**ä¸€å¥è¯ï¼š** ç”¨ `[start:stop:step]` è¯­æ³•é€‰æ‹©ä¸€æ®µè¿ç»­å…ƒç´ 

```python
arr = np.array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])

arr[2:5]     # [2 3 4] - ç´¢å¼•2åˆ°4ï¼ˆä¸å«5ï¼‰
arr[:3]      # [0 1 2] - å‰3ä¸ªï¼ˆstarté»˜è®¤0ï¼‰
arr[7:]      # [7 8 9] - ä»ç´¢å¼•7åˆ°æœ«å°¾ï¼ˆstopé»˜è®¤æœ€åï¼‰
arr[::2]     # [0 2 4 6 8] - æ¯éš”1ä¸ªå–1ä¸ªï¼ˆæ­¥é•¿2ï¼‰
arr[::-1]    # [9 8 7...0] - åè½¬ï¼ˆæ­¥é•¿-1ï¼‰
arr[1:7:2]   # [1 3 5] - ä»1åˆ°6ï¼Œæ­¥é•¿2
```

**è®°å¿†æŠ€å·§ï¼š**
- çœç•¥start â†’ ä»å¤´å¼€å§‹
- çœç•¥stop â†’ åˆ°æœ«å°¾
- çœç•¥step â†’ æ­¥é•¿1
- è´Ÿstep â†’ åå‘

**åº”ç”¨ï¼š** å‘é‡æ•°æ®åº“Top-Kæ£€ç´¢
```python
# å–å‰10ä¸ªæœ€ç›¸ä¼¼çš„embedding
top_10 = embeddings[sorted_indices[:10]]
```

---

### å¡ç‰‡7ï¼šå¸ƒå°”ç´¢å¼• - æ¡ä»¶è¿‡æ»¤ ğŸ”

**ä¸€å¥è¯ï¼š** ç”¨å¸ƒå°”æ•°ç»„ä½œä¸ºç´¢å¼•ï¼Œé€‰æ‹©æ»¡è¶³æ¡ä»¶çš„å…ƒç´ 

```python
arr = np.array([1, 5, 3, 8, 2, 7])

# ç¬¬1æ­¥ï¼šåˆ›å»ºå¸ƒå°”æ©ç 
mask = arr > 4
print(mask)  # [False  True False  True False  True]

# ç¬¬2æ­¥ï¼šç”¨æ©ç ç´¢å¼•
result = arr[mask]
print(result)  # [5 8 7]

# ä¸€æ­¥åˆ°ä½
result = arr[arr > 4]  # [5 8 7]

# å¤åˆæ¡ä»¶ï¼ˆæ³¨æ„ç”¨&å’Œ|ï¼Œä¸æ˜¯and/orï¼‰
result = arr[(arr > 2) & (arr < 8)]  # [5 3 7]
```

**åº”ç”¨ï¼š** æ ¹æ®ç›¸ä¼¼åº¦é˜ˆå€¼è¿‡æ»¤ç»“æœ
```python
threshold = 0.85
relevant_docs = embeddings[similarity_scores > threshold]
relevant_texts = texts[similarity_scores > threshold]
```

---

### å¡ç‰‡8ï¼šèŠ±å¼ç´¢å¼• - è‡ªç”±é€‰æ‹© ğŸ¨

**ä¸€å¥è¯ï¼š** ç”¨æ•´æ•°æ•°ç»„ä½œä¸ºç´¢å¼•ï¼Œè‡ªç”±é€‰æ‹©ä»»æ„ä½ç½®çš„å…ƒç´ 

```python
arr = np.array([10, 20, 30, 40, 50])

# ç”¨åˆ—è¡¨/æ•°ç»„ä½œä¸ºç´¢å¼•
indices = [0, 2, 4]
print(arr[indices])  # [10 30 50]

# å¯ä»¥é‡å¤
indices = [1, 1, 3, 1]
print(arr[indices])  # [20 20 40 20]

# å¯ä»¥ä¹±åº
indices = [4, 1, 0]
print(arr[indices])  # [50 20 10]
```

**åº”ç”¨ï¼š** æ ¹æ®å‘é‡æ•°æ®åº“è¿”å›çš„ç´¢å¼•åˆ—è¡¨æå–embedding
```python
# å‘é‡æ•°æ®åº“è¿”å›ç›¸ä¼¼æ–‡æ¡£çš„ç´¢å¼•
similar_indices = vector_db.search(query, top_k=5)
# â†’ [1245, 6789, 234, 5678, 901]

# æ ¹æ®ç´¢å¼•æå–å¯¹åº”çš„embeddingå’Œæ–‡æœ¬
similar_embeddings = all_embeddings[similar_indices]
similar_texts = all_texts[similar_indices]
```

---

### å¡ç‰‡9ï¼šè§†å›¾vså‰¯æœ¬ - å†…å­˜é™·é˜± âš ï¸

**ä¸€å¥è¯ï¼š** åˆ‡ç‰‡è¿”å›è§†å›¾ï¼ˆå…±äº«å†…å­˜ï¼‰ï¼Œå¸ƒå°”/èŠ±å¼ç´¢å¼•è¿”å›å‰¯æœ¬ï¼ˆç‹¬ç«‹å†…å­˜ï¼‰

```python
arr = np.array([1, 2, 3, 4, 5])

# åˆ‡ç‰‡ â†’ è§†å›¾
view = arr[1:4]
view[0] = 999
print(arr)  # [1, 999, 3, 4, 5] - åŸæ•°ç»„è¢«æ”¹äº†ï¼

# å¸ƒå°”ç´¢å¼• â†’ å‰¯æœ¬
copy = arr[arr > 2]
copy[0] = 888
print(arr)  # [1, 999, 3, 4, 5] - åŸæ•°ç»„ä¸å˜

# æ˜¾å¼å¤åˆ¶
safe_copy = arr[:3].copy()
safe_copy[0] = 777
print(arr)  # [1, 999, 3, 4, 5] - åŸæ•°ç»„ä¸å˜
```

**åˆ¤æ–­æŠ€å·§ï¼š**
```python
# æ£€æŸ¥æ˜¯å¦å…±äº«å†…å­˜
print(np.shares_memory(arr, view))   # True - è§†å›¾
print(np.shares_memory(arr, copy))   # False - å‰¯æœ¬
```

**åº”ç”¨ï¼š** é¿å…æ„å¤–ä¿®æ”¹å‘é‡æ•°æ®åº“ä¸­çš„åŸå§‹æ•°æ®
```python
# âŒ å¯èƒ½æ„å¤–ä¿®æ”¹åŸæ•°æ®
subset = embeddings[:100]
subset *= 2  # åŸembeddingså‰100ä¸ªä¹Ÿè¢«ä¹˜ä»¥2ï¼

# âœ… å®‰å…¨åšæ³•
subset = embeddings[:100].copy()
subset *= 2  # åŸæ•°æ®ä¸å—å½±å“
```

---

### å¡ç‰‡10ï¼šreshape - å½¢çŠ¶å˜æ¢ ğŸ”„

**ä¸€å¥è¯ï¼š** reshapeæ”¹å˜æ•°ç»„å½¢çŠ¶ä½†ä¸æ”¹å˜æ•°æ®ï¼ˆå…ƒç´ æ€»æ•°å¿…é¡»ç›¸åŒï¼‰

```python
arr = np.arange(12)  # [0, 1, 2, ..., 11]

# reshapeåˆ°äºŒç»´
matrix = arr.reshape(3, 4)  # 3è¡Œ4åˆ—
# [[0  1  2  3]
#  [4  5  6  7]
#  [8  9 10 11]]

# reshapeåˆ°ä¸‰ç»´
tensor = arr.reshape(2, 3, 2)  # 2Ã—3Ã—2

# è‡ªåŠ¨è®¡ç®—ç»´åº¦ï¼ˆç”¨-1ï¼‰
matrix = arr.reshape(4, -1)  # 4è¡Œï¼Œåˆ—æ•°è‡ªåŠ¨è®¡ç®—ä¸º3

# å±•å¹³ï¼ˆä»»æ„ç»´åº¦â†’ä¸€ç»´ï¼‰
flat = matrix.flatten()  # [0, 1, 2, ..., 11]
```

**é‡è¦è§„åˆ™ï¼š**
```python
# å…ƒç´ æ€»æ•°å¿…é¡»ç›¸ç­‰
arr.size == reshaped.size  # å¿…é¡»ä¸ºTrue

# ä¾‹ï¼š12ä¸ªå…ƒç´ å¯ä»¥reshapeæˆï¼š
# (12,), (3, 4), (4, 3), (2, 6), (6, 2), (2, 3, 2) âœ…
# (3, 5) âŒ å› ä¸º3Ã—5=15â‰ 12
```

**åº”ç”¨ï¼š** å‘é‡æ•°æ®åº“ä¸­è°ƒæ•´embeddingå½¢çŠ¶
```python
# å•ä¸ªembedding (768,) â†’ batch (1, 768)
single_emb = np.array([0.1, 0.2, ..., 0.768])  # (768,)
batch_emb = single_emb.reshape(1, -1)           # (1, 768)

# æ‰¹é‡embeddingå±•å¹³
batch_embs = np.random.rand(100, 768)  # (100, 768)
flat = batch_embs.flatten()             # (76800,)
```

---

## 10. ã€ä¸€å¥è¯æ€»ç»“ã€‘

**NumPyæ•°ç»„æ˜¯å­˜å‚¨åœ¨è¿ç»­å†…å­˜ä¸­çš„å›ºå®šç±»å‹æ•°æ®é›†åˆï¼Œæä¾›é«˜æ•ˆçš„åˆ›å»ºã€ç´¢å¼•å’Œå½¢çŠ¶æ“ä½œåŠŸèƒ½ï¼Œæ˜¯å‘é‡æ•°æ®åº“ä¸­å­˜å‚¨å’Œæ£€ç´¢embeddingå‘é‡çš„æ ¸å¿ƒå·¥å…·ï¼Œé€šè¿‡å‘é‡åŒ–è¿ç®—å®ç°æ¯”Pythonåˆ—è¡¨å¿«100-1000å€çš„æ€§èƒ½ã€‚**

---

## é™„å½•ï¼šå¿«é€Ÿå‚è€ƒå¡ ğŸ“‹

### æ ¸å¿ƒè¦ç‚¹é€ŸæŸ¥

```python
import numpy as np

# ===== åˆ›å»ºæ•°ç»„ =====
np.array([1, 2, 3])                    # ä»åˆ—è¡¨
np.zeros((3, 4))                       # å…¨é›¶
np.ones(5)                             # å…¨ä¸€
np.random.rand(3, 4)                   # éšæœº[0,1)
np.random.randn(3, 4)                  # æ ‡å‡†æ­£æ€
np.random.randint(0, 10, size=5)       # éšæœºæ•´æ•°
np.arange(0, 10, 2)                    # ç­‰å·®æ•°åˆ—
np.linspace(0, 1, 5)                   # ç­‰åˆ†åŒºé—´

# ===== æ•°ç»„å±æ€§ =====
arr.shape        # å½¢çŠ¶
arr.dtype        # æ•°æ®ç±»å‹
arr.size         # å…ƒç´ æ€»æ•°
arr.ndim         # ç»´åº¦æ•°
arr.nbytes       # æ€»å­—èŠ‚æ•°
arr.itemsize     # å•ä¸ªå…ƒç´ å­—èŠ‚æ•°

# ===== ç´¢å¼• =====
arr[5]           # å•å…ƒç´ 
arr[1:10]        # åˆ‡ç‰‡
arr[arr > 5]     # å¸ƒå°”ç´¢å¼•
arr[[1, 5, 9]]   # èŠ±å¼ç´¢å¼•

# ===== å½¢çŠ¶æ“ä½œ =====
arr.reshape(3, 4)    # æ”¹å˜å½¢çŠ¶
arr.flatten()        # å±•å¹³
arr.transpose()      # è½¬ç½®

# ===== ç±»å‹è½¬æ¢ =====
arr.astype(np.float32)  # è½¬æ¢ç±»å‹

# ===== å‰¯æœ¬ =====
arr.copy()           # æ˜¾å¼å¤åˆ¶
```

---

### å¸¸è§é™·é˜± âš ï¸

| é™·é˜± | é”™è¯¯ç¤ºä¾‹ | æ­£ç¡®åšæ³• |
|-----|---------|---------|
| åˆ‡ç‰‡æ˜¯è§†å›¾ | `sub=arr[:10]; sub[0]=999` | `sub=arr[:10].copy()` |
| å½¢çŠ¶ä¸åŒ¹é… | `arr.reshape(2, 5)` (10å…ƒç´ ) | ç¡®ä¿ `2Ã—5=10` |
| ç±»å‹ä¸åŒ¹é… | `arr[np.float32] = 5` | `arr = arr.astype(np.float32)` |
| é¢‘ç¹append | `np.append(arr, x)` å¾ªç¯ | é¢„åˆ†é… `np.zeros((n, m))` |

---

### å‘é‡æ•°æ®åº“å¸¸ç”¨æ¨¡å¼ ğŸ—„ï¸

```python
# 1. é¢„åˆ†é…embeddingç©ºé—´
embeddings = np.zeros((num_docs, embed_dim), dtype=np.float32)

# 2. æ‰¹é‡å¡«å……
for i, doc in enumerate(documents):
    embeddings[i] = model.encode(doc)

# 3. Top-Kæ£€ç´¢
sorted_indices = np.argsort(scores)[::-1][:k]
top_k_embeddings = embeddings[sorted_indices]

# 4. é˜ˆå€¼è¿‡æ»¤
high_conf = embeddings[scores > threshold]

# 5. å½’ä¸€åŒ–ï¼ˆä¸‹èŠ‚è¯¾è¯¦ç»†è®²ï¼‰
embeddings /= np.linalg.norm(embeddings, axis=1)[:, None]
```

---

## å­¦ä¹ æ£€æŸ¥æ¸…å• âœ…

- [ ] ç†è§£NumPyæ•°ç»„ä¸Pythonåˆ—è¡¨çš„3ä¸ªæœ¬è´¨åŒºåˆ«ï¼ˆå†…å­˜ã€æ€§èƒ½ã€åŠŸèƒ½ï¼‰
- [ ] æŒæ¡5ç§æ ¸å¿ƒåˆ›å»ºæ–¹æ³•ï¼ˆarray, zeros, random, arange, linspaceï¼‰
- [ ] ç†Ÿç»ƒä½¿ç”¨4ç§ç´¢å¼•æ¨¡å¼ï¼ˆå•å…ƒç´ ã€åˆ‡ç‰‡ã€å¸ƒå°”ã€èŠ±å¼ï¼‰
- [ ] ç†è§£è§†å›¾vså‰¯æœ¬çš„åŒºåˆ«ï¼ŒçŸ¥é“ä½•æ—¶ç”¨`.copy()`
- [ ] èƒ½ç”¨`reshape`è‡ªå¦‚åœ°è°ƒæ•´æ•°ç»„å½¢çŠ¶
- [ ] çŸ¥é“å¦‚ä½•ä¸ºå‘é‡æ•°æ®åº“é¢„åˆ†é…embeddingç©ºé—´
- [ ] èƒ½æ ¹æ®ç›¸ä¼¼åº¦åˆ†æ•°è¿›è¡ŒTop-Kæ£€ç´¢å’Œé˜ˆå€¼è¿‡æ»¤
- [ ] ç†è§£NumPyæ•°ç»„çš„ç¬¬ä¸€æ€§åŸç†ï¼ˆè¿ç»­å†…å­˜+å…ƒæ•°æ®ï¼‰
- [ ] èƒ½ç”¨å‰ç«¯å¼€å‘æ¦‚å¿µç±»æ¯”NumPyæ•°ç»„
- [ ] èƒ½å›ç­”é¢è¯•é—®é¢˜"NumPyæ•°ç»„å’ŒPythonåˆ—è¡¨çš„åŒºåˆ«"

---

## ä¸‹ä¸€æ­¥å­¦ä¹  ğŸš€

æŒæ¡äº†NumPyæ•°ç»„çš„åˆ›å»ºä¸ç´¢å¼•åï¼Œå»ºè®®å­¦ä¹ ï¼š

1. **å‘é‡åŒ–è¿ç®—**ï¼ˆä¸‹ä¸€è¯¾ï¼‰ï¼šå…ƒç´ çº§è¿ç®—ã€çŸ©é˜µä¹˜æ³•ã€æ€§èƒ½ä¼˜åŒ–
2. **å¹¿æ’­æœºåˆ¶**ï¼šä¸åŒå½¢çŠ¶æ•°ç»„çš„è¿ç®—è§„åˆ™
3. **çº¿æ€§ä»£æ•°åŸºç¡€**ï¼šç‚¹ç§¯ã€èŒƒæ•°ã€ä½™å¼¦ç›¸ä¼¼åº¦

**å­¦ä¹ è·¯å¾„ï¼š**
```
NumPyæ•°ç»„åˆ›å»ºä¸ç´¢å¼•ï¼ˆå½“å‰ï¼‰
    â†“
å‘é‡åŒ–è¿ç®—
    â†“
å¹¿æ’­æœºåˆ¶åŸºç¡€
    â†“
ç‚¹ç§¯è¿ç®—
    â†“
å‘é‡èŒƒæ•°
    â†“
ä½™å¼¦ç›¸ä¼¼åº¦
    â†“
å‘é‡æ•°æ®åº“å®æˆ˜
```

---

## å‚è€ƒèµ„æº ğŸ“š

1. **NumPyå®˜æ–¹æ–‡æ¡£**ï¼šhttps://numpy.org/doc/stable/
   - Array creation: https://numpy.org/doc/stable/user/basics.creation.html
   - Indexing: https://numpy.org/doc/stable/user/basics.indexing.html

2. **NumPyæ€§èƒ½æŒ‡å—**ï¼šhttps://numpy.org/doc/stable/user/absolute_beginners.html

3. **å‘é‡æ•°æ®åº“èµ„æº**ï¼š
   - Pinecone: https://www.pinecone.io/learn/
   - Weaviate: https://weaviate.io/developers/weaviate
   - Milvus: https://milvus.io/docs

4. **Pythonæ•°æ®ç§‘å­¦æ‰‹å†Œ**ï¼šhttps://jakevdp.github.io/PythonDataScienceHandbook/

---

**ç»“è¯­ï¼š** NumPyæ•°ç»„æ˜¯å‘é‡æ•°æ®åº“çš„åŸºçŸ³ã€‚æŒæ¡äº†æ•°ç»„çš„åˆ›å»ºå’Œç´¢å¼•ï¼Œä½ å·²ç»èƒ½å¤Ÿå­˜å‚¨å’Œæ£€ç´¢embeddingå‘é‡äº†ï¼ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•ç”¨å‘é‡åŒ–è¿ç®—é«˜æ•ˆè®¡ç®—å‘é‡ä¹‹é—´çš„ç›¸ä¼¼åº¦ã€‚åŠ æ²¹ï¼ğŸ’ª